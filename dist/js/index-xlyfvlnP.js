import{c3 as e,r as t,n,V as o,br as l,bB as r,U as a,ah as i,J as s,c4 as d,D as c,_ as u,R as g,P as m,N as p,ag as f,L as h,ac as w,p as v,q as b,F as x,bE as y,aV as S,af as C,bf as R,be as I,aq as M,C as j,Y as k,bF as N,bs as P,t as E,o as F,c5 as z,c6 as D,c7 as _,c8 as L,c9 as A,I as T,ca as V,j as B,c as O,v as H,w as G,f as q,b1 as $,cb as W,cc as X,ad as Y,S as U,A as Z,cd as K,T as Q,bi as J,bQ as ee,bh as te,ce as ne,bl as oe}from"./index-BB8uQJur.js";import{R as le,a as re,T as ae}from"./index-CGYGLuRq.js";import{D as ie,g as se,i as de,a as ce,b as ue,c as ge,d as me,M as pe}from"./hooks-96EgTEj0.js";import{s as fe,c as he,S as we,f as ve,i as be,a as calculateStatus}from"./index-Ca1FkZjl.js";import{T as xe,S as ye}from"./text_p-Bj2ORef_.js";import{c as Se,T as Ce,s as Re}from"./createLucideIcon-B6Xw5J45.js";import{C as Ie}from"./index-BDmDzsEX.js";import{E as Me}from"./index-B4Yf1T-J.js";import{S as je}from"./index-B8bjgi9_.js";import{S as ke}from"./index-TA-jlISB.js";import{C as Ne,L as Pe,R as Ee}from"./loader-circle-DffqRlgt.js";import{R as Fe,C as ze}from"./row-DzcT6VjK.js";import{u as De,F as _e}from"./index-BqbOAVfK.js";function Le(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}function Ae(t,n,o,l){var r=e.unstable_batchedUpdates?function(t){e.unstable_batchedUpdates(o,t)}:o;return null!=t&&t.addEventListener&&t.addEventListener(n,r,l),{remove:function(){null!=t&&t.removeEventListener&&t.removeEventListener(n,r,l)}}}var Te=/* @__PURE__ */t.createContext(null),Ve=function(e){var s=e.visible,d=e.maskTransitionName,c=e.getContainer,u=e.prefixCls,g=e.rootClassName,m=e.icons,p=e.countRender,f=e.showSwitch,h=e.showProgress,w=e.current,v=e.transform,b=e.count,x=e.scale,y=e.minScale,S=e.maxScale,C=e.closeIcon,R=e.onActive,I=e.onClose,M=e.onZoomIn,j=e.onZoomOut,k=e.onRotateRight,N=e.onRotateLeft,P=e.onFlipX,E=e.onFlipY,F=e.onReset,z=e.toolbarRender,D=e.zIndex,_=e.image,L=t.useContext(Te),A=m.rotateLeft,T=m.rotateRight,V=m.zoomIn,B=m.zoomOut,O=m.close,H=m.left,G=m.right,q=m.flipX,$=m.flipY,W="".concat(u,"-operations-operation");t.useEffect(function(){var e=function(e){e.keyCode===i.ESC&&I()};return s&&window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[s]);var X=function(e,t){e.preventDefault(),e.stopPropagation(),R(t)},Y=t.useCallback(function(e){var l=e.type,r=e.disabled,a=e.onClick,i=e.icon;/* @__PURE__ */
return t.createElement("div",{key:l,className:n(W,"".concat(u,"-operations-operation-").concat(l),o({},"".concat(u,"-operations-operation-disabled"),!!r)),onClick:a},i)},[W,u]),U=f?Y({icon:H,onClick:function(e){return X(e,-1)},type:"prev",disabled:0===w}):void 0,Z=f?Y({icon:G,onClick:function(e){return X(e,1)},type:"next",disabled:w===b-1}):void 0,K=Y({icon:$,onClick:E,type:"flipY"}),Q=Y({icon:q,onClick:P,type:"flipX"}),J=Y({icon:A,onClick:N,type:"rotateLeft"}),ee=Y({icon:T,onClick:k,type:"rotateRight"}),te=Y({icon:B,onClick:j,type:"zoomOut",disabled:x<=y}),ne=Y({icon:V,onClick:M,type:"zoomIn",disabled:x===S}),oe=/* @__PURE__ */t.createElement("div",{className:"".concat(u,"-operations")},K,Q,J,ee,te,ne);/* @__PURE__ */
return t.createElement(l,{visible:s,motionName:d},function(e){var l=e.className,i=e.style;/* @__PURE__ */
return t.createElement(r,{open:!0,getContainer:null!=c?c:document.body},/* @__PURE__ */t.createElement("div",{className:n("".concat(u,"-operations-wrapper"),l,g),style:a(a({},i),{},{zIndex:D})},null===C?null:/* @__PURE__ */t.createElement("button",{className:"".concat(u,"-close"),onClick:I},C||O),f&&/* @__PURE__ */t.createElement(t.Fragment,null,/* @__PURE__ */t.createElement("div",{className:n("".concat(u,"-switch-left"),o({},"".concat(u,"-switch-left-disabled"),0===w)),onClick:function(e){return X(e,-1)}},H),/* @__PURE__ */t.createElement("div",{className:n("".concat(u,"-switch-right"),o({},"".concat(u,"-switch-right-disabled"),w===b-1)),onClick:function(e){return X(e,1)}},G)),/* @__PURE__ */t.createElement("div",{className:"".concat(u,"-footer")},h&&/* @__PURE__ */t.createElement("div",{className:"".concat(u,"-progress")},p?p(w+1,b):/* @__PURE__ */t.createElement("bdi",null,"".concat(w+1," / ").concat(b))),z?z(oe,a(a({icons:{prevIcon:U,nextIcon:Z,flipYIcon:K,flipXIcon:Q,rotateLeftIcon:J,rotateRightIcon:ee,zoomOutIcon:te,zoomInIcon:ne},actions:{onActive:R,onFlipY:E,onFlipX:P,onRotateLeft:N,onRotateRight:k,onZoomOut:j,onZoomIn:M,onReset:F,onClose:I},transform:v},L?{current:w,total:b}:{}),{},{image:_})):oe)))})},Be={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Oe(e,t,n,l){var r=t+n,a=(n-l)/2;if(n>l){if(t>0)return o({},e,a);if(t<0&&r<l)return o({},e,-a)}else if(t<0||r>l)return o({},e,t<0?a:-a);return{}}function He(e,t,n,o){var l=Le(),r=l.width,i=l.height,s=null;return e<=r&&t<=i?s={x:0,y:0}:(e>r||t>i)&&(s=a(a({},Oe("x",n,e,r)),Oe("y",o,t,i))),s}function Ge(e){var n=e.src,o=e.isCustomPlaceholder,l=e.fallback,r=t.useState(o?"loading":"normal"),a=s(r,2),i=a[0],d=a[1],c=t.useRef(!1),u="error"===i;t.useEffect(function(){var e=!0;return function(e){return new Promise(function(t){if(e){var n=document.createElement("img");n.onerror=function(){return t(!1)},n.onload=function(){return t(!0)},n.src=e}else t(!1)})}(n).then(function(t){!t&&e&&d("error")}),function(){e=!1}},[n]),t.useEffect(function(){o&&!c.current?d("loading"):u&&d("normal")},[n]);var g=function(){d("normal")};return[function(e){c.current=!1,"loading"===i&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(c.current=!0,g())},u&&l?{src:l}:{onLoad:g,src:n},i]}function qe(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.hypot(n,o)}function $e(e,n,o,l,r,i,d){var c=r.rotate,u=r.scale,g=r.x,m=r.y,p=t.useState(!1),f=s(p,2),h=f[0],w=f[1],v=t.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),b=function(e){v.current=a(a({},v.current),e)};return t.useEffect(function(){var e;return o&&n&&(e=Ae(window,"touchmove",function(e){return e.preventDefault()},{passive:!1})),function(){var t;null===(t=e)||void 0===t||t.remove()}},[o,n]),{isTouching:h,onTouchStart:function(e){if(n){e.stopPropagation(),w(!0);var t=e.touches,o=void 0===t?[]:t;o.length>1?b({point1:{x:o[0].clientX,y:o[0].clientY},point2:{x:o[1].clientX,y:o[1].clientY},eventType:"touchZoom"}):b({point1:{x:o[0].clientX-g,y:o[0].clientY-m},eventType:"move"})}},onTouchMove:function(e){var t=e.touches,n=void 0===t?[]:t,o=v.current,l=o.point1,r=o.point2,a=o.eventType;if(n.length>1&&"touchZoom"===a){var c={x:n[0].clientX,y:n[0].clientY},u={x:n[1].clientX,y:n[1].clientY},g=function(e,t,n,o){var l=qe(e,n),r=qe(t,o);if(0===l&&0===r)return[e.x,e.y];var a=l/(l+r);return[e.x+a*(t.x-e.x),e.y+a*(t.y-e.y)]}(l,r,c,u),m=s(g,2),p=m[0],f=m[1],h=qe(c,u)/qe(l,r);d(h,"touchZoom",p,f,!0),b({point1:c,point2:u,eventType:"touchZoom"})}else"move"===a&&(i({x:n[0].clientX-l.x,y:n[0].clientY-l.y},"move"),b({eventType:"move"}))},onTouchEnd:function(){if(o){if(h&&w(!1),b({eventType:"none"}),l>u)return i({x:0,y:0,scale:l},"touchZoom");var t=e.current.offsetWidth*u,n=e.current.offsetHeight*u,r=e.current.getBoundingClientRect(),s=r.left,d=r.top,g=c%180!=0,m=He(g?n:t,g?t:n,s,d);m&&i(a({},m),"dragRebound")}}}}var We=["fallback","src","imgRef"],Xe=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],Ye=function(e){var t=e.fallback,n=e.src,o=e.imgRef,l=u(e,We),r=Ge({src:n,fallback:t}),a=s(r,2),i=a[0],d=a[1];/* @__PURE__ */
return g.createElement("img",m({ref:function(e){o.current=e,i(e)}},l,d))},Ue=function(e){var l=e.prefixCls,r=e.src,p=e.alt,f=e.imageInfo,h=e.fallback,w=e.movable,v=void 0===w||w,b=e.onClose,x=e.visible,y=e.icons,S=void 0===y?{}:y,C=e.rootClassName,R=e.closeIcon,I=e.getContainer,M=e.current,j=void 0===M?0:M,k=e.count,N=void 0===k?1:k,P=e.countRender,E=e.scaleStep,F=void 0===E?.5:E,z=e.minScale,D=void 0===z?1:z,_=e.maxScale,L=void 0===_?50:_,A=e.transitionName,T=void 0===A?"zoom":A,V=e.maskTransitionName,B=void 0===V?"fade":V,O=e.imageRender,H=e.imgCommonProps,G=e.toolbarRender,q=e.onTransform,$=e.onChange,W=u(e,Xe),X=t.useRef(),Y=t.useContext(Te),U=Y&&N>1,Z=Y&&N>=1,K=t.useState(!0),Q=s(K,2),J=Q[0],ee=Q[1],te=function(e,n,o,l){var r=t.useRef(null),i=t.useRef([]),u=t.useState(Be),g=s(u,2),m=g[0],p=g[1],f=function(e,t){null===r.current&&(i.current=[],r.current=c(function(){p(function(e){var n=e;return i.current.forEach(function(e){n=a(a({},n),e)}),r.current=null,null==l||l({transform:n,action:t}),n})})),i.current.push(a(a({},m),e))};return{transform:m,resetTransform:function(e){p(Be),d(Be,m)||null==l||l({transform:Be,action:e})},updateTransform:f,dispatchZoomChange:function(t,l,r,a,i){var s=e.current,d=s.width,c=s.height,u=s.offsetWidth,g=s.offsetHeight,p=s.offsetLeft,h=s.offsetTop,w=t,v=m.scale*t;v>o?(v=o,w=o/m.scale):v<n&&(w=(v=i?v:n)/m.scale);var b=null!=r?r:innerWidth/2,x=null!=a?a:innerHeight/2,y=w-1,S=y*d*.5,C=y*c*.5,R=y*(b-m.x-p),I=y*(x-m.y-h),M=m.x-(R-S),j=m.y-(I-C);if(t<1&&1===v){var k=u*v,N=g*v,P=Le(),E=P.width,F=P.height;k<=E&&N<=F&&(M=0,j=0)}f({x:M,y:j,scale:v},l)}}}(X,D,L,q),ne=te.transform,oe=te.resetTransform,le=te.updateTransform,re=te.dispatchZoomChange,ae=function(e,n,o,l,r,i,d){var c=r.rotate,u=r.scale,g=r.x,m=r.y,p=t.useState(!1),f=s(p,2),h=f[0],w=f[1],v=t.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),b=function(e){o&&h&&i({x:e.pageX-v.current.diffX,y:e.pageY-v.current.diffY},"move")},x=function(){if(o&&h){w(!1);var t=v.current,n=t.transformX,l=t.transformY;if(g===n||m===l)return;var r=e.current.offsetWidth*u,s=e.current.offsetHeight*u,d=e.current.getBoundingClientRect(),p=d.left,f=d.top,b=c%180!=0,x=He(b?s:r,b?r:s,p,f);x&&i(a({},x),"dragRebound")}};return t.useEffect(function(){var e,t,o,l;if(n){o=Ae(window,"mouseup",x,!1),l=Ae(window,"mousemove",b,!1);try{window.top!==window.self&&(e=Ae(window.top,"mouseup",x,!1),t=Ae(window.top,"mousemove",b,!1))}catch(r){}}return function(){var n,r,a,i;null===(n=o)||void 0===n||n.remove(),null===(r=l)||void 0===r||r.remove(),null===(a=e)||void 0===a||a.remove(),null===(i=t)||void 0===i||i.remove()}},[o,h,g,m,c,n]),{isMoving:h,onMouseDown:function(e){n&&0===e.button&&(e.preventDefault(),e.stopPropagation(),v.current={diffX:e.pageX-g,diffY:e.pageY-m,transformX:g,transformY:m},w(!0))},onMouseMove:b,onMouseUp:x,onWheel:function(e){if(o&&0!=e.deltaY){var t=Math.abs(e.deltaY/100),n=1+Math.min(t,1)*l;e.deltaY>0&&(n=1/n),d(n,"wheel",e.clientX,e.clientY)}}}}(X,v,x,F,ne,le,re),se=ae.isMoving,de=ae.onMouseDown,ce=ae.onWheel,ue=$e(X,v,x,D,ne,le,re),ge=ue.isTouching,me=ue.onTouchStart,pe=ue.onTouchMove,fe=ue.onTouchEnd,he=ne.rotate,we=ne.scale,ve=n(o({},"".concat(l,"-moving"),se));t.useEffect(function(){J||ee(!0)},[J]);var be=function(e){var t=j+e;!Number.isInteger(t)||t<0||t>N-1||(ee(!1),oe(e<0?"prev":"next"),null==$||$(t,j))},xe=function(e){x&&U&&(e.keyCode===i.LEFT?be(-1):e.keyCode===i.RIGHT&&be(1))};t.useEffect(function(){var e=Ae(window,"keydown",xe,!1);return function(){e.remove()}},[x,U,j]);var ye=/* @__PURE__ */g.createElement(Ye,m({},H,{width:e.width,height:e.height,imgRef:X,className:"".concat(l,"-img"),alt:p,style:{transform:"translate3d(".concat(ne.x,"px, ").concat(ne.y,"px, 0) scale3d(").concat(ne.flipX?"-":"").concat(we,", ").concat(ne.flipY?"-":"").concat(we,", 1) rotate(").concat(he,"deg)"),transitionDuration:(!J||ge)&&"0s"},fallback:h,src:r,onWheel:ce,onMouseDown:de,onDoubleClick:function(e){x&&(1!==we?le({x:0,y:0,scale:1},"doubleClick"):re(1+F,"doubleClick",e.clientX,e.clientY))},onTouchStart:me,onTouchMove:pe,onTouchEnd:fe,onTouchCancel:fe})),Se=a({url:r,alt:p},f);/* @__PURE__ */
return g.createElement(g.Fragment,null,/* @__PURE__ */g.createElement(ie,m({transitionName:T,maskTransitionName:B,closable:!1,keyboard:!0,prefixCls:l,onClose:b,visible:x,classNames:{wrapper:ve},rootClassName:C,getContainer:I},W,{afterClose:function(){oe("close")}}),/* @__PURE__ */g.createElement("div",{className:"".concat(l,"-img-wrapper")},O?O(ye,a({transform:ne,image:Se},Y?{current:j}:{})):ye)),/* @__PURE__ */g.createElement(Ve,{visible:x,transform:ne,maskTransitionName:B,closeIcon:R,getContainer:I,prefixCls:l,rootClassName:C,icons:S,countRender:P,showSwitch:U,showProgress:Z,current:j,count:N,scale:we,minScale:D,maxScale:L,toolbarRender:G,onActive:be,onZoomIn:function(){re(1+F,"zoomIn")},onZoomOut:function(){re(1/(1+F),"zoomOut")},onRotateRight:function(){le({rotate:he+90},"rotateRight")},onRotateLeft:function(){le({rotate:he-90},"rotateLeft")},onFlipX:function(){le({flipX:!ne.flipX},"flipX")},onFlipY:function(){le({flipY:!ne.flipY},"flipY")},onClose:b,onReset:function(){oe("reset")},zIndex:void 0!==W.zIndex?W.zIndex+1:void 0,image:Se}))},Ze=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];var Ke=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Qe=["src"],Je=0;var et=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],tt=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],nt=function(e){var l=e.src,r=e.alt,i=e.onPreviewClose,d=e.prefixCls,c=void 0===d?"rc-image":d,g=e.previewPrefixCls,p=void 0===g?"".concat(c,"-preview"):g,w=e.placeholder,v=e.fallback,b=e.width,x=e.height,y=e.style,S=e.preview,C=void 0===S||S,R=e.className,I=e.onClick,M=e.onError,j=e.wrapperClassName,k=e.wrapperStyle,N=e.rootClassName,P=u(e,et),E=w&&!0!==w,F="object"===f(C)?C:{},z=F.src,D=F.visible,_=void 0===D?void 0:D,L=F.onVisibleChange,A=void 0===L?i:L,T=F.getContainer,V=void 0===T?void 0:T,B=F.mask,O=F.maskClassName,H=F.movable,G=F.icons,q=F.scaleStep,$=F.minScale,W=F.maxScale,X=F.imageRender,Y=F.toolbarRender,U=u(F,tt),Z=null!=z?z:l,K=h(!!_,{value:_,onChange:A}),Q=s(K,2),J=Q[0],ee=Q[1],te=Ge({src:l,isCustomPlaceholder:E,fallback:v}),ne=s(te,3),oe=ne[0],le=ne[1],re=ne[2],ae=t.useState(null),ie=s(ae,2),se=ie[0],de=ie[1],ce=t.useContext(Te),ue=!!C,ge=n(c,j,N,o({},"".concat(c,"-error"),"error"===re)),me=t.useMemo(function(){var t={};return Ze.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t},Ze.map(function(t){return e[t]})),pe=function(e,n){var o=t.useState(function(){return String(Je+=1)}),l=s(o,1)[0],r=t.useContext(Te),a={data:n,canPreview:e};return t.useEffect(function(){if(r)return r.register(l,a)},[]),t.useEffect(function(){r&&r.register(l,a)},[e,n]),l}(ue,t.useMemo(function(){return a(a({},me),{},{src:Z})},[Z,me]));/* @__PURE__ */
return t.createElement(t.Fragment,null,/* @__PURE__ */t.createElement("div",m({},P,{className:ge,onClick:ue?function(e){var t,n,o,l=(t=e.target,n=t.getBoundingClientRect(),o=document.documentElement,{left:n.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||document.body.clientLeft||0),top:n.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||document.body.clientTop||0)}),r=l.left,a=l.top;ce?ce.onPreview(pe,Z,r,a):(de({x:r,y:a}),ee(!0)),null==I||I(e)}:I,style:a({width:b,height:x},k)}),/* @__PURE__ */t.createElement("img",m({},me,{className:n("".concat(c,"-img"),o({},"".concat(c,"-img-placeholder"),!0===w),R),style:a({height:x},y),ref:oe},le,{width:b,height:x,onError:M})),"loading"===re&&/* @__PURE__ */t.createElement("div",{"aria-hidden":"true",className:"".concat(c,"-placeholder")},w),B&&ue&&/* @__PURE__ */t.createElement("div",{className:n("".concat(c,"-mask"),O),style:{display:"none"===(null==y?void 0:y.display)?"none":void 0}},B)),!ce&&ue&&/* @__PURE__ */t.createElement(Ue,m({"aria-hidden":!J,visible:J,prefixCls:p,onClose:function(){ee(!1),de(null)},mousePosition:se,src:Z,alt:r,imageInfo:{width:b,height:x},fallback:v,getContainer:V,icons:G,movable:H,scaleStep:q,minScale:$,maxScale:W,rootClassName:N,imageRender:X,imgCommonProps:me,toolbarRender:Y},U)))};nt.PreviewGroup=function(e){var n,l=e.previewPrefixCls,r=void 0===l?"rc-image-preview":l,i=e.children,d=e.icons,c=void 0===d?{}:d,g=e.items,w=e.preview,v=e.fallback,b="object"===f(w)?w:{},x=b.visible,y=b.onVisibleChange,S=b.getContainer,C=b.current,R=b.movable,I=b.minScale,M=b.maxScale,j=b.countRender,k=b.closeIcon,N=b.onChange,P=b.onTransform,E=b.toolbarRender,F=b.imageRender,z=u(b,Ke),D=function(e){var n=t.useState({}),l=s(n,2),r=l[0],i=l[1],d=t.useCallback(function(e,t){return i(function(n){return a(a({},n),{},o({},e,t))}),function(){i(function(t){var n=a({},t);return delete n[e],n})}},[]);return[t.useMemo(function(){return e?e.map(function(e){if("string"==typeof e)return{data:{src:e}};var t={};return Object.keys(e).forEach(function(n){["src"].concat(p(Ze)).includes(n)&&(t[n]=e[n])}),{data:t}}):Object.keys(r).reduce(function(e,t){var n=r[t],o=n.canPreview,l=n.data;return o&&e.push({data:l,id:t}),e},[])},[e,r]),d,!!e]}(g),_=s(D,3),L=_[0],A=_[1],T=_[2],V=h(0,{value:C}),B=s(V,2),O=B[0],H=B[1],G=t.useState(!1),q=s(G,2),$=q[0],W=q[1],X=(null===(n=L[O])||void 0===n?void 0:n.data)||{},Y=X.src,U=u(X,Qe),Z=h(!!x,{value:x,onChange:function(e,t){null==y||y(e,t,O)}}),K=s(Z,2),Q=K[0],J=K[1],ee=t.useState(null),te=s(ee,2),ne=te[0],oe=te[1],le=t.useCallback(function(e,t,n,o){var l=T?L.findIndex(function(e){return e.data.src===t}):L.findIndex(function(t){return t.id===e});H(l<0?0:l),J(!0),oe({x:n,y:o}),W(!0)},[L,T]);t.useEffect(function(){Q?$||H(0):W(!1)},[Q]);var re=t.useMemo(function(){return{register:A,onPreview:le}},[A,le]);/* @__PURE__ */
return t.createElement(Te.Provider,{value:re},i,/* @__PURE__ */t.createElement(Ue,m({"aria-hidden":!Q,movable:R,visible:Q,prefixCls:r,closeIcon:k,onClose:function(){J(!1),oe(null)},mousePosition:ne,imgCommonProps:U,src:Y,fallback:v,icons:c,minScale:I,maxScale:M,getContainer:S,current:O,count:L.length,countRender:j,onTransform:P,toolbarRender:E,imageRender:F,onChange:function(e,t){H(e),null==N||N(e,t)}},z)))};var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},lt=function(e,n){/* @__PURE__ */
return t.createElement(w,m({},e,{ref:n,icon:ot}))},rt=/* @__PURE__ */t.forwardRef(lt),at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},it=function(e,n){/* @__PURE__ */
return t.createElement(w,m({},e,{ref:n,icon:at}))},st=/* @__PURE__ */t.forwardRef(it),dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},ct=function(e,n){/* @__PURE__ */
return t.createElement(w,m({},e,{ref:n,icon:dt}))},ut=/* @__PURE__ */t.forwardRef(ct),gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},mt=function(e,n){/* @__PURE__ */
return t.createElement(w,m({},e,{ref:n,icon:gt}))},pt=/* @__PURE__ */t.forwardRef(mt),ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},ht=function(e,n){/* @__PURE__ */
return t.createElement(w,m({},e,{ref:n,icon:ft}))},wt=/* @__PURE__ */t.forwardRef(ht);const vt=e=>({position:e||"absolute",inset:0}),bt=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:o,marginXXS:l,prefixCls:r,colorTextLightSolid:a}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:a,background:new x("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${r}-mask-info`]:Object.assign(Object.assign({},S),{padding:`0 ${C(o)}`,[t]:{marginInlineEnd:l,svg:{verticalAlign:"baseline"}}})}},xt=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:o,marginXL:l,margin:r,paddingLG:a,previewOperationColorDisabled:i,previewOperationHoverColor:s,motionDurationSlow:d,iconCls:c,colorTextLightSolid:u}=e,g=new x(n).setA(.1),m=g.clone().setA(.2);return{[`${t}-footer`]:{position:"fixed",bottom:l,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:r},[`${t}-close`]:{position:"fixed",top:l,right:{_skip_check_:!0,value:l},display:"flex",color:u,backgroundColor:g.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${d}`,"&:hover":{backgroundColor:m.toRgbString()},[`& > ${c}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${C(a)}`,backgroundColor:g.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${d}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${c}`]:{color:s},"&-disabled":{color:i,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${c}`]:{fontSize:e.previewOperationSize}}}}},yt=e=>{const{modalMaskBg:t,iconCls:n,previewOperationColorDisabled:o,previewCls:l,zIndexPopup:r,motionDurationSlow:a}=e,i=new x(t).setA(.1),s=i.clone().setA(.2);return{[`${l}-switch-left, ${l}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(r).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:i.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${a}`,userSelect:"none","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.previewOperationSize}},[`${l}-switch-left`]:{insetInlineStart:e.marginSM},[`${l}-switch-right`]:{insetInlineEnd:e.marginSM}}},St=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:o,componentCls:l}=e;return[{[`${l}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},vt()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},vt()),{transition:`transform ${o} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${l}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${l}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[xt(e),yt(e)]}]},Ct=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},bt(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},vt())}}},Rt=e=>{const{previewCls:t}=e;return{[`${t}-root`]:y(e,"zoom"),"&":de(e,!0)}},It=v("Image",e=>{const t=`${e.componentCls}-preview`,n=b(e,{previewCls:t,modalMaskBg:new x("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[Ct(n),St(n),se(b(n,{componentCls:t})),Rt(n)]},e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new x(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new x(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new x(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:1.5*e.fontSizeIcon}));const Mt={rotateLeft:/* @__PURE__ */t.createElement(rt,null),rotateRight:/* @__PURE__ */t.createElement(st,null),zoomIn:/* @__PURE__ */t.createElement(pt,null),zoomOut:/* @__PURE__ */t.createElement(wt,null),close:/* @__PURE__ */t.createElement(M,null),left:/* @__PURE__ */t.createElement(I,null),right:/* @__PURE__ */t.createElement(R,null),flipX:/* @__PURE__ */t.createElement(ut,null),flipY:/* @__PURE__ */t.createElement(ut,{rotate:90})};var jt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]])}return n};const kt=e=>{const{prefixCls:o,preview:l,className:r,rootClassName:a,style:i,fallback:s}=e,d=jt(e,["prefixCls","preview","className","rootClassName","style","fallback"]),{getPrefixCls:c,getPopupContainer:u,className:g,style:m,preview:p,fallback:f}=E("image"),[h]=F("Image"),w=c("image",o),v=c(),b=k(w),[x,y,S]=It(w,b),C=n(a,y,S,b),R=n(r,y,g),[I]=N("ImagePreview","object"==typeof l?l.zIndex:void 0),M=t.useMemo(()=>{if(!1===l)return l;const e="object"==typeof l?l:{},{getContainer:o,closeIcon:r,rootClassName:a,destroyOnClose:i,destroyOnHidden:s}=e,d=jt(e,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:/* @__PURE__ */t.createElement("div",{className:`${w}-mask-info`},/* @__PURE__ */t.createElement(le,null),null==h?void 0:h.preview),icons:Mt},d),{destroyOnClose:null!=s?s:i,rootClassName:n(C,a),getContainer:null!=o?o:u,transitionName:P(v,"zoom",e.transitionName),maskTransitionName:P(v,"fade",e.maskTransitionName),zIndex:I,closeIcon:null!=r?r:null==p?void 0:p.closeIcon})},[l,h,null==p?void 0:p.closeIcon]),j=Object.assign(Object.assign({},m),i),z=null!=s?s:f;return x(/* @__PURE__ */t.createElement(nt,Object.assign({prefixCls:w,preview:M,rootClassName:C,className:R,style:j,fallback:z},d)))};kt.PreviewGroup=e=>{var{previewPrefixCls:o,preview:l}=e,r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]])}return n}(e,["previewPrefixCls","preview"]);const{getPrefixCls:a,direction:i}=t.useContext(j),s=a("image",o),d=`${s}-preview`,c=a(),u=k(s),[g,m,p]=It(s,u),[f]=N("ImagePreview","object"==typeof l?l.zIndex:void 0),h=t.useMemo(()=>Object.assign(Object.assign({},Mt),{left:"rtl"===i?/* @__PURE__ */t.createElement(R,null):/* @__PURE__ */t.createElement(I,null),right:"rtl"===i?/* @__PURE__ */t.createElement(I,null):/* @__PURE__ */t.createElement(R,null)}),[i]),w=t.useMemo(()=>{var e;if(!1===l)return l;const t="object"==typeof l?l:{},o=n(m,p,u,null!==(e=t.rootClassName)&&void 0!==e?e:"");return Object.assign(Object.assign({},t),{transitionName:P(c,"zoom",t.transitionName),maskTransitionName:P(c,"fade",t.maskTransitionName),rootClassName:o,zIndex:f})},[l,c,f,m,p,u]);return g(/* @__PURE__ */t.createElement(nt.PreviewGroup,Object.assign({preview:w,previewPrefixCls:d,icons:h},r)))};var Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},Pt=class extends z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:D()})}getOptimisticResult(e){return e.behavior=D(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var n,o;const{state:l}=e,r=super.createResult(e,t),{isFetching:a,isRefetching:i,isError:s,isRefetchError:d}=r,c=null==(o=null==(n=l.fetchMeta)?void 0:n.fetchMore)?void 0:o.direction,u=s&&"forward"===c,g=a&&"forward"===c,m=s&&"backward"===c,p=a&&"backward"===c;return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:L(t,l.data),hasPreviousPage:_(t,l.data),isFetchNextPageError:u,isFetchingNextPage:g,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:d&&!u&&!m,isRefetching:i&&!g&&!p}}};function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Et.apply(this,arguments)}const Ft=(e,n)=>/* @__PURE__ */t.createElement(T,Et({},e,{ref:n,icon:Ne})),zt=/* @__PURE__ */t.forwardRef(Ft);var Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"};function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_t.apply(this,arguments)}const Lt=(e,n)=>/* @__PURE__ */t.createElement(T,_t({},e,{ref:n,icon:Dt})),At=/* @__PURE__ */t.forwardRef(Lt);function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tt.apply(this,arguments)}const Vt=(e,n)=>/* @__PURE__ */t.createElement(T,Tt({},e,{ref:n,icon:V})),Bt=/* @__PURE__ */t.forwardRef(Vt);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ot.apply(this,arguments)}const Ht=(e,n)=>/* @__PURE__ */t.createElement(T,Ot({},e,{ref:n,icon:Nt})),Gt=/* @__PURE__ */t.forwardRef(Ht),qt=Se("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),$t=Se("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Wt=Se("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Xt=[{key:"rewards",label:"MyRewards",description:"Helper & Minter earnings"},{key:"boxes",label:"MyBoxes",description:"All boxes linked to me"}],Yt=({active:e,onChange:t,className:n})=>/* @__PURE__ */B.jsx("div",{className:O("flex flex-wrap gap-3 justify-center",n),children:/* @__PURE__ */B.jsx(re.Group,{buttonStyle:"solid",size:"large",onChange:e=>t(e.target.value),defaultValue:e,children:Xt.map(e=>/* @__PURE__ */B.jsx(re.Button,{value:e.key,children:e.label},e.key))})});async function Ut(e){const{network:t,layer:n}=H;try{const{data:o,error:l}=await fe.from("user_rewards").select("*").eq("network",t).eq("layer",n).eq("user_id",e);if(l)return{userRewardsData:null,error:l};const r=o?o.map(e=>function(e){var t,n;const o=he(e,{deep:!0});return{id:o.id||"",userId:o.userId||(null==(t=o.user_id)?void 0:t.toString())||"",rewardType:o.rewardType||o.reward_type||"",token:o.token||"",amount:(null==(n=o.amount)?void 0:n.toString())||"0"}}(e)):[];return{userRewardsData:r.length>0?r:null,error:null}}catch(o){return{userRewardsData:null,error:Kt(o)}}}async function Zt(e){const{network:t,layer:n}=H;try{const{data:o,error:l}=await fe.from("user_withdraws").select("*").eq("network",t).eq("layer",n).eq("user_id",e);if(l)return{userWithdrawsData:null,error:l};const r=o?o.map(e=>function(e){var t,n;const o=he(e,{deep:!0});return{id:o.id||"",userId:o.userId||(null==(t=o.user_id)?void 0:t.toString())||"",withdrawType:o.withdrawType||o.withdraw_type||"",token:o.token||"",amount:(null==(n=o.amount)?void 0:n.toString())||"0"}}(e)):[];return{userWithdrawsData:r.length>0?r:null,error:null}}catch(o){return{userWithdrawsData:null,error:Kt(o)}}}function Kt(e){return e?"object"==typeof e&&"message"in e?e:new Error("Unknown Supabase error"):null}const Qt=[],Jt={Minter:{label:"The Minter Rewards",description:"The cumulative rewards from minting boxes, which can be withdrawn through withdrawMinterRewards.",withdrawMethod:"withdrawMinterRewards"},Helper:{label:"The Helper Rewards",description:"The rewards obtained by sellers/completers, which can be withdrawn through withdrawHelperRewards.",withdrawMethod:"withdrawHelperRewards"}},en=e=>{if(!e)return BigInt(0);try{return BigInt(e)}catch{return BigInt(0)}},tn=(e,t)=>{if(e===BigInt(0))return"0";try{const n=q(e,t),[o,l="0"]=n.split("."),r=l.replace(/0+$/,"").slice(0,4);return r?`${o}.${r}`:o}catch{return e.toString()}},nn=e=>e?e.toLowerCase():"",on=e=>{const n=ce(),o=t.useMemo(()=>(e=>{const t=/* @__PURE__ */new Map;return e.forEach(e=>{t.set(e.address.toLowerCase(),e)}),t})(n),[n]),l=Boolean(e),r=G({queryKey:["profile-user-rewards",H.network,H.layer,e],queryFn:async()=>{if(!e)return{rewards:[],withdraws:[]};const[t,n]=await Promise.all([Ut(e),Zt(e)]);if(t.error)throw t.error;if(n.error)throw n.error;return{rewards:t.userRewardsData??[],withdraws:n.userWithdrawsData??[]}},enabled:l,staleTime:6e4}),a=t.useMemo(()=>{if(!l||!r.data)return Qt;const e={Minter:/* @__PURE__ */new Map,Helper:/* @__PURE__ */new Map},t={Minter:/* @__PURE__ */new Map,Helper:/* @__PURE__ */new Map};r.data.rewards.forEach(t=>{const n="Minter"===t.rewardType?"Minter":"Helper",o=nn(t.token),l=en(t.amount),r=e[n];r.set(o,(r.get(o)??BigInt(0))+l)}),r.data.withdraws.forEach(e=>{const n="Minter"===e.withdrawType?"Minter":"Helper",o=nn(e.token),l=en(e.amount),r=t[n];r.set(o,(r.get(o)??BigInt(0))+l)});return["Minter","Helper"].map(n=>{const l=Array.from(e[n].entries()).map(([e,l])=>{const r=t[n].get(e)??BigInt(0),a=l-r,i=a>BigInt(0)?a:BigInt(0),s=o.get(e),d=(null==s?void 0:s.decimals)??18;var c;return{tokenAddress:e,tokenSymbol:(null==s?void 0:s.symbol)??((c=e)?`${c.slice(0,6)}...${c.slice(-4)}`:"UNKNOWN"),decimals:d,formattedEarned:tn(l,d),formattedWithdrawn:tn(r,d),formattedClaimable:tn(i,d),raw:{earned:l,withdrawn:r,claimable:i}}});return 0===l.length?null:{category:n,label:Jt[n].label,description:Jt[n].description,withdrawMethod:Jt[n].withdrawMethod,tokens:l}}).filter(e=>Boolean(e))},[l,r.data,o]),i=t.useMemo(()=>a.some(e=>e.tokens.some(e=>e.raw.claimable>BigInt(0))),[a]);return{categories:a,hasClaimable:i,isLoading:r.isLoading,isFetching:r.isFetching,isError:r.isError,error:r.error,refetch:r.refetch,enabled:l}},ln=()=>{const{writeContractAsync:e,data:n,error:o,isPending:l,isError:r,isSuccess:a,status:i,reset:s}=ue(),{isSuccess:d}=ge({hash:n}),{address:c}=$(),[u,g]=t.useState(null),[m,p]=t.useState(null),f=W(e=>e.addWithdrawInteraction);return t.useEffect(()=>{d&&u&&c&&m?f(u,m,n):r&&s()},[d,u,c,m,n,f,r,s]),{writeCustormV3:async t=>{const n=t.functionName;g(n),p(t.tokenAddress);try{return await e({address:t.contract.address,abi:t.contract.abi,functionName:t.functionName,args:t.args})}catch(o){throw o}},hash:n,error:o,isPending:l,isLoading:"idle"!==i&&"error"!==i&&!d,isSuccess:a,status:i,isError:r,reset:s,isSuccessed:d}},{Text:rn}=K,an=({userId:e,className:n})=>{const{categories:o,isLoading:l,isFetching:r,error:a,refetch:i}=on(e),{withdrawRewards:s,pendingKey:d,isLoading:c,error:u,isSuccessed:m}=(()=>{const{writeCustormV3:e,error:n,isLoading:o,isSuccessed:l}=ln(),r=me(),[a,i]=t.useState(null),s=t.useCallback(async({method:t,tokenAddress:n})=>{if(!n)throw new Error("Token address is required");i({method:t,tokenAddress:n});try{return await e({contract:r.FundManager,functionName:t,tokenAddress:n,args:[n]})}catch(o){throw i(null),o}},[r.FundManager,e]),d=a?`${a.method}-${a.tokenAddress.toLowerCase()}`:null;return t.useEffect(()=>{l&&a&&i(null)},[l,a]),t.useEffect(()=>{n&&i(null)},[n]),{withdrawRewards:s,currentAction:a,pendingKey:d,error:n,isLoading:o,isSuccessed:l}})(),{login:p}=X(),f=W(e=>e.hasWithdrawInteraction);g.useEffect(()=>{if(m){const e=setTimeout(()=>{i()},2e3);return()=>clearTimeout(e)}},[m,i]);return e?/* @__PURE__ */B.jsx(Ie,{className:O("rounded-2xl",n),styles:{body:{padding:"24px"}},children:/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[
/* @__PURE__ */B.jsxs("div",{className:"flex items-center justify-between",children:[
/* @__PURE__ */B.jsx(Ce,{children:"Rewards Dashboard"}),
/* @__PURE__ */B.jsx(Y,{icon:/* @__PURE__ */B.jsx(Wt,{className:"h-4 w-4"}),onClick:()=>i(),loading:r,size:"middle",children:"Refresh"})]}),a&&/* @__PURE__ */B.jsx(Z,{message:"Failed to load reward data",description:a.message,type:"error",showIcon:!0,closable:!0}),u&&/* @__PURE__ */B.jsx(Z,{message:"Withdrawal failed",description:u.message,type:"warning",showIcon:!0,closable:!0}),l?/* @__PURE__ */B.jsx("div",{className:"flex justify-center py-12",children:/* @__PURE__ */B.jsx(je,{size:"large"})}):0===o.length?/* @__PURE__ */B.jsx(Me,{description:"No reward records to display"}):/* @__PURE__ */B.jsx(U,{direction:"vertical",size:"large",className:"w-full",children:o.map(e=>/* @__PURE__ */B.jsx(Ie,{title:/* @__PURE__ */B.jsxs("div",{className:"flex items-center justify-between",children:[
/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx(Ce,{className:"mb-1!",children:e.label}),
/* @__PURE__ */B.jsx(xe,{size:"sm",type:"secondary",children:e.description})]}),
/* @__PURE__ */B.jsxs(ae,{color:"blue",children:["Total ",e.tokens.length," tokens"]})]}),className:"rounded-xl",styles:{body:{padding:"20px"}},children:/* @__PURE__ */B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.tokens.map(t=>{const n=`${e.withdrawMethod}-${t.tokenAddress.toLowerCase()}`,o=t.raw.claimable>BigInt(0),l=d===n&&c,r=f(e.withdrawMethod,t.tokenAddress)&&o,a=!o||l||r;/* @__PURE__ */
return B.jsx(Ie,{size:"small",className:"rounded-lg",styles:{body:{padding:"16px"}},children:/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"middle",className:"w-full",children:[
/* @__PURE__ */B.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[
/* @__PURE__ */B.jsx("div",{className:"flex-1 min-w-0",children:/* @__PURE__ */B.jsx(ae,{color:"yellow",style:{fontSize:"14px"},children:t.tokenSymbol})}),
/* @__PURE__ */B.jsx("div",{className:"flex-1 min-w-0",children:/* @__PURE__ */B.jsx(ke,{title:/* @__PURE__ */B.jsx(rn,{type:"secondary",children:"Total Rewards"}),value:t.formattedEarned,precision:3,valueStyle:{fontSize:"16px",fontWeight:500}})}),
/* @__PURE__ */B.jsx("div",{className:"flex-1 min-w-0",children:/* @__PURE__ */B.jsx(ke,{title:/* @__PURE__ */B.jsx(rn,{type:"secondary",children:"Withdrawn"}),value:t.formattedWithdrawn,precision:3,valueStyle:{fontSize:"16px"}})})]}),
/* @__PURE__ */B.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[
/* @__PURE__ */B.jsx("div",{className:"flex-1 min-w-0",children:/* @__PURE__ */B.jsx(ke,{title:/* @__PURE__ */B.jsx(rn,{strong:!0,children:"Claimable"}),value:t.formattedClaimable,precision:3,valueStyle:{fontSize:"18px",fontWeight:600,color:o?"#52c41a":void 0}})}),
/* @__PURE__ */B.jsx("div",{className:"flex-1 min-w-0 sm:max-w-[200px]",children:/* @__PURE__ */B.jsx(Y,{type:"primary",block:!0,size:"large",disabled:a,loading:l,onClick:()=>(async(e,t)=>{try{await s({method:e,tokenAddress:t}),Re.success("Withdrawal transaction submitted, waiting for confirmation...")}catch(n){Re.error("Withdrawal failed. Please try again.")}})(e.withdrawMethod,t.tokenAddress),children:l?"Withdrawing...":r?"Success":"Withdraw"})})]})]})},`${e.category}-${t.tokenAddress}`)})})},e.withdrawMethod))})]})}):/* @__PURE__ */B.jsx(Ie,{className:O("rounded-2xl",n),children:/* @__PURE__ */B.jsx(Me,{description:"You need to login/bind to view the reward data",image:Me.PRESENTED_IMAGE_SIMPLE,children:/* @__PURE__ */B.jsx(Y,{type:"primary",onClick:()=>p(),children:"Login"})})})},sn=({userId:e,className:t})=>/* @__PURE__ */B.jsx("div",{className:O("space-y-6",t),children:/* @__PURE__ */B.jsx(an,{userId:e})}),dn=({data:e,loading:t=!1,selectedTab:n="all",onTabClick:o,className:l,variant:r="default",showZeroValues:a=!0})=>{const i=[{key:"all",displayName:"All Boxes",count:(null==e?void 0:e.totalBoxes)||0},{key:"owned",displayName:"Owned",count:(null==e?void 0:e.ownedBoxes)||0},{key:"minted",displayName:"Minted",count:(null==e?void 0:e.mintedBoxes)||0},{key:"sold",displayName:"Sold",count:(null==e?void 0:e.soldBoxes)||0},{key:"bought",displayName:"Bought",count:(null==e?void 0:e.boughtBoxes)||0},{key:"bade",displayName:"Bade",count:(null==e?void 0:e.bidBoxes)||0},{key:"completed",displayName:"Completed",count:(null==e?void 0:e.completedBoxes)||0},{key:"published",displayName:"Published",count:(null==e?void 0:e.publishedBoxes)||0}],s=a?i:i.filter(e=>e.count>0||e.key===n),d=e=>{o&&!t&&o(e)};return"compact"===r?/* @__PURE__ */B.jsx("div",{className:O("flex flex-wrap gap-2 p-4 bg-card border rounded-lg",l),children:s.map(e=>/* @__PURE__ */B.jsxs("button",{onClick:()=>d(e.key),disabled:t||!o,className:O("flex items-center gap-1 px-3 py-2 rounded-md","text-sm font-medium transition-all duration-200","border border-transparent",n===e.key?"bg-primary text-primary-foreground border-primary":"bg-muted hover:bg-muted/80 text-muted-foreground hover:text-foreground",o&&"cursor-pointer",t&&"opacity-50 cursor-not-allowed"),children:[
/* @__PURE__ */B.jsx("span",{children:e.displayName}),
/* @__PURE__ */B.jsx("span",{className:O("px-1.5 py-0.5 text-xs rounded",n===e.key?"bg-primary-foreground/20 text-primary-foreground":"bg-background text-foreground"),children:t?"...":e.count})]},e.key))}):/* @__PURE__ */B.jsx("div",{className:O("grid grid-cols-4 md:grid-cols-8 gap-1 md:gap-1.5","p-1.5 md:p-2 bg-card border rounded-xl shadow-sm",l),children:s.map(e=>/* @__PURE__ */B.jsxs("div",{onClick:()=>d(e.key),className:O("relative flex flex-col items-center justify-center","p-1 md:p-1.5 rounded-lg transition-all duration-300","border border-transparent","hover:shadow-md hover:border-primary",o&&!t&&"cursor-pointer hover:scale-105",n===e.key&&["bg-primary/10 border-primary shadow-lg scale-105","ring-1 ring-primary/20"],n!==e.key&&["bg-background hover:bg-accent/50",o&&"hover:border-border"],t&&"opacity-60 cursor-not-allowed",0===e.count&&n!==e.key&&"opacity-75"),children:[
/* @__PURE__ */B.jsx("div",{className:O("text-sm md:text-base lg:text-lg font-bold","transition-all duration-300",n===e.key?"text-primary":"text-foreground",t&&"animate-pulse"),children:t?/* @__PURE__ */B.jsx(Pe,{className:"h-3 w-3 md:h-3.5 md:w-3.5 animate-spin"}):e.count.toLocaleString()}),
/* @__PURE__ */B.jsx("div",{className:"text-center",children:/* @__PURE__ */B.jsx("p",{className:O("text-xs font-medium leading-tight mt-0.5",n===e.key?"text-primary":"text-muted-foreground"),children:e.displayName})}),n===e.key&&/* @__PURE__ */B.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2",children:/* @__PURE__ */B.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-primary rounded-full"})})]},e.key))})},cn=({title:e="",description:n="",metadata:o,onClick:l,className:r,titleMaxLength:a,descriptionMaxLength:i,responsive:s=!0})=>{var d,c;const u=s?{titleMaxLength:{sm:a||50,md:a||70,lg:a||90},descriptionMaxLength:{sm:i||100,md:i||180,lg:i||220},titleSize:{sm:"h5",md:"h5",lg:"h4"},descriptionClamp:{sm:"line-clamp-2",md:"line-clamp-3",lg:"line-clamp-4"}}:{titleMaxLength:a||100,descriptionMaxLength:i||250,titleSize:"h4",descriptionClamp:"line-clamp-3"},g=(e,t)=>{if(!e||"string"!=typeof e)return"";if("number"==typeof t)return e.length<=t?e:e.substring(0,t)+"...";const n=t.md;return e.length<=n?e:e.substring(0,n)+"..."},m=e=>{if(!e||"string"!=typeof e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return""}};t.useMemo(()=>s?4:3,[s]);const p=t.useMemo(()=>[o.country,o.state].filter(Boolean).join(", "),[o.country,o.state]),f=t.useMemo(()=>g(e,u.titleMaxLength),[e,u.titleMaxLength]),h=t.useMemo(()=>g(n,u.descriptionMaxLength),[n,u.descriptionMaxLength]),w=e&&e.length>("number"==typeof u.titleMaxLength?u.titleMaxLength:(null==(d=u.titleMaxLength)?void 0:d.md)||70),v=n&&n.length>("number"==typeof u.descriptionMaxLength?u.descriptionMaxLength:(null==(c=u.descriptionMaxLength)?void 0:c.md)||180);/* @__PURE__ */
return B.jsx("div",{className:O("flex-1 min-w-0",r),children:/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:s?["small","middle"]:"middle",style:{width:"100%"},children:[
/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:s?"small":"middle",style:{width:"100%"},children:[w?/* @__PURE__ */B.jsx(Q,{title:e,placement:"topLeft",children:/* @__PURE__ */B.jsx(Ce,{children:f})}):/* @__PURE__ */B.jsx(Ce,{children:f}),n&&(v?/* @__PURE__ */B.jsx(Q,{title:n,placement:"topLeft",children:/* @__PURE__ */B.jsx(xe,{size:"xs",type:"secondary",className:"line-clamp-2",children:h})}):/* @__PURE__ */B.jsx(xe,{size:"xs",type:"secondary",className:"line-clamp-2",children:h}))]}),
/* @__PURE__ */B.jsxs(U,{wrap:!0,size:s?["small","middle"]:"middle",style:{width:"100%"},children:[
/* @__PURE__ */B.jsxs(ae,{style:{fontFamily:"monospace",fontSize:s?void 0:13},className:O(s&&"text-xs sm:text-sm"),children:["ID: ",o.tokenId]}),
/* @__PURE__ */B.jsx(we,{status:o.status,size:"sm",responsive:s}),p&&/* @__PURE__ */B.jsx(Q,{title:p,children:/* @__PURE__ */B.jsx(ae,{icon:/* @__PURE__ */B.jsx(At,{}),style:{fontSize:s?void 0:12},className:O(s&&"text-xs sm:text-sm"),children:/* @__PURE__ */B.jsx("span",{style:{maxWidth:s?void 0:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},className:O(s&&"max-w-[100px] sm:max-w-[120px] md:max-w-[140px]"),children:p})})}),o.eventDate&&m(o.eventDate)&&/* @__PURE__ */B.jsx(ae,{icon:/* @__PURE__ */B.jsx(zt,{}),style:{fontSize:s?void 0:12},className:O(s&&"text-xs sm:text-sm"),children:m(o.eventDate)})]})]})})},{Text:un,Title:gn}=K,mn=({title:e="Can withdraw Funds",funds:t,selectedValue:n,onSelect:o,onDeselect:l,className:r})=>{const a=t.filter(e=>{if(e.disabled)return!1;if(!e.amount||"0"===e.amount||"0n"===e.amount)return!1;try{return("string"==typeof e.amount&&e.amount.includes("n")?BigInt(e.amount.replace("n","")):BigInt(e.amount))>BigInt(0)}catch{return!1}}),i=a.length>0;return t.length>0&&0===a.length?/* @__PURE__ */B.jsx("div",{className:r,children:/* @__PURE__ */B.jsx(Me,{image:Me.PRESENTED_IMAGE_SIMPLE,description:/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"small",align:"center",children:[
/* @__PURE__ */B.jsx(un,{type:"secondary",children:""}),
/* @__PURE__ */B.jsx(un,{type:"secondary",children:"No funds available"})]}),style:{padding:"16px 0"}})}):/* @__PURE__ */B.jsx("div",{className:r,children:/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"middle",style:{width:"100%"},children:[
/* @__PURE__ */B.jsx(gn,{level:5,style:{margin:0},children:i?e:"No funds available"}),a.length>0&&/* @__PURE__ */B.jsx(re.Group,{value:n||void 0,onChange:e=>{const t=e.target.value;n===t?null==l||l(t):null==o||o(t)},children:/* @__PURE__ */B.jsx(U,{direction:"vertical",size:"small",style:{width:"100%"},children:a.map((e,t)=>/* @__PURE__ */B.jsx(re.Button,{value:e.symbol,disabled:e.disabled,onClick:()=>{return t=e.symbol,void(n===t&&(null==l||l(t)));var t},style:{width:"100%",height:"auto",padding:"6px 10px",textAlign:"left"},children:/* @__PURE__ */B.jsxs(U,{direction:"horizontal",size:4,style:{width:"100%"},children:[
/* @__PURE__ */B.jsx(un,{strong:!0,style:{fontSize:16,fontFamily:"monospace"},children:ve(e.amount,e.decimals??18)}),
/* @__PURE__ */B.jsx(un,{type:"secondary",style:{fontSize:12},children:e.symbol}),e.type&&/* @__PURE__ */B.jsx(un,{type:"secondary",style:{fontSize:11},children:e.type})]})},`${e.symbol}-${t}`))})})]})})},pn=({data:e,funds:n,actions:o,className:l})=>{const r={tokenId:e.tokenId.toString(),status:e.status,country:e.country,state:e.state,eventDate:e.eventDate},a=t.useMemo(()=>/* @__PURE__ */B.jsx("style",{children:"\n            .card-profile-mobile {\n                display: block;\n            }\n            .card-profile-desktop {\n                display: none;\n            }\n            @media (min-width: 768px) {\n                .card-profile-mobile {\n                    display: none;\n                }\n                .card-profile-desktop {\n                    display: block;\n                }\n            }\n        "}),[]);/* @__PURE__ */
return B.jsxs(B.Fragment,{children:[a,
/* @__PURE__ */B.jsxs(Ie,{className:l,style:{marginBottom:10},hoverable:!0,styles:{body:{padding:"12px 16px"}},children:[
/* @__PURE__ */B.jsx("div",{className:"card-profile-mobile",children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],children:[
/* @__PURE__ */B.jsx(ze,{span:24,children:/* @__PURE__ */B.jsx("div",{onClick:o.onCardClick,style:{cursor:o.onCardClick?"pointer":"default"},children:/* @__PURE__ */B.jsx(cn,{title:e.title,description:e.description,metadata:r,responsive:!0})})}),
/* @__PURE__ */B.jsx(ze,{span:24,children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],align:"middle",children:[
/* @__PURE__ */B.jsx(ze,{span:9,children:/* @__PURE__ */B.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:/* @__PURE__ */B.jsx(kt,{src:be(e.boxImage||""),alt:`${e.title} #${e.tokenId}`,width:100,height:100,style:{objectFit:"cover"}})})}),
/* @__PURE__ */B.jsx(ze,{span:15,children:/* @__PURE__ */B.jsx(mn,{funds:n,selectedValue:o.selectedTokenSymbol,onSelect:o.onSelect,onDeselect:o.onDeselect})})]})})]})}),
/* @__PURE__ */B.jsx("div",{className:"card-profile-desktop",children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],align:"middle",children:[
/* @__PURE__ */B.jsx(ze,{md:16,lg:17,xl:18,children:/* @__PURE__ */B.jsxs(Fe,{onClick:o.onCardClick,style:{cursor:o.onCardClick?"pointer":"default"},gutter:[12,12],align:"top",children:[
/* @__PURE__ */B.jsx(ze,{md:8,lg:7,xl:6,children:/* @__PURE__ */B.jsx("div",{style:{display:"flex",justifyContent:"center"},children:/* @__PURE__ */B.jsx(kt,{src:be(e.boxImage||""),alt:`${e.title} #${e.tokenId}`,width:110,height:110,style:{objectFit:"cover"}})})}),
/* @__PURE__ */B.jsx(ze,{md:16,lg:17,xl:18,children:/* @__PURE__ */B.jsx(cn,{title:e.title,description:e.description,metadata:r,responsive:!0})})]})}),
/* @__PURE__ */B.jsx(ze,{md:8,lg:7,xl:6,children:/* @__PURE__ */B.jsx(mn,{funds:n,selectedValue:o.selectedTokenSymbol,onSelect:o.onSelect,onDeselect:o.onDeselect})})]})})]})]})},fn={currentPage:1,pageSize:10,loadedItems:[]},hn={hasMoreItems:!0,showPagination:!1},wn={selectedTab:"all",selectedStatus:void 0,orderBy:"tokenId",orderDirection:"desc"},vn=J((e,t)=>({pageState:fn,scrollState:hn,filterState:wn,batchSize:4,setPageState:t=>{e(e=>({pageState:{...e.pageState,...t}}))},addLoadedItems:t=>{e(e=>{const n=new Set(e.pageState.loadedItems),o=t.filter(e=>!n.has(e));if(0===o.length)return e;const l=Array.from(/* @__PURE__ */new Set([...e.pageState.loadedItems,...o]));return l.sort((e,t)=>e-t),{pageState:{...e.pageState,loadedItems:l}}})},getNextIndex:()=>{const{pageState:e}=t();return 0===e.loadedItems.length?0:e.loadedItems.length},resetPageState:()=>{e(()=>({pageState:fn}))},updateScrollState:t=>{e(e=>({scrollState:{...e.scrollState,...t}}))},setFilterState:t=>{e(e=>({filterState:{...e.filterState,...t}}))},updateSelectedTab:t=>{e(e=>({filterState:{...e.filterState,selectedTab:t},pageState:{...fn},scrollState:{...hn}}))},updateSelectedStatus:t=>{e(e=>({filterState:{...e.filterState,selectedStatus:t},pageState:{...fn},scrollState:{...hn}}))},updateOrderBy:(t,n="desc")=>{e(e=>({filterState:{...e.filterState,orderBy:t,orderDirection:n},pageState:{...fn},scrollState:{...hn}}))},resetAllState:()=>{e({pageState:fn,scrollState:hn,filterState:wn})}})),bn=(e,t)=>{if(e===BigInt(0))return"0.000";try{const n=q(e,t),[o,l="0"]=n.split("."),r=l.replace(/0+$/,"").slice(0,4);return r?`${o}.${r}`:o}catch{return e.toString()}},xn=({box:e,userId:n})=>{const o=ce(),l=vn(e=>e.filterState.selectedTab),r=t.useMemo(()=>e.acceptedToken?o.find(t=>{var n;return t.address.toLowerCase()===(null==(n=e.acceptedToken)?void 0:n.toLowerCase())}):null,[e.acceptedToken,o]),a=Boolean(("bought"===l||"bade"===l)&&n&&e.acceptedToken),{orderAmountsData:i,isLoading:s}=De(e.id,n??"",["Buyer","Bidder"]),d=t.useMemo(()=>{var t,o,l;const s=e.acceptedToken??(null==r?void 0:r.address),d=(null==r?void 0:r.decimals)??18,c=(null==r?void 0:r.symbol)??((u=s)?u.length<=10?u:`${u.slice(0,6)}...${u.slice(-4)}`:"UNKNOWN");var u;const g=[];if(a&&i&&i.length>0){const e=i.reduce((e,t)=>{try{return e+BigInt(t.amount||"0")}catch{return e}},BigInt(0));e>BigInt(0)&&g.push({amount:(m={amount:e,symbol:c,address:s??void 0,decimals:d}).amount.toString(),formattedAmount:bn(m.amount,m.decimals),symbol:m.symbol,address:m.address,decimals:m.decimals,hasValidAmount:m.amount>BigInt(0)})}var m;const p=Boolean(n&&e.refundPermit&&(null==(t=e.buyer)?void 0:t.id)&&e.buyer.id===n),f=Boolean(n&&(!(null==(o=e.buyer)?void 0:o.id)||e.buyer.id!==n)&&(null==(l=e.bidders)?void 0:l.some(e=>e.id===n))),h=p||f,w=p?"withdrawRefundAmounts":"withdrawOrderAmounts",v=p?"Refund":"Order";return{funds:{boxId:e.id,type:v,claimMethod:w,tokens:h?g:[]},hasClaimableFunds:h&&g.some(e=>e.hasValidAmount)}},[r,e.id,e.acceptedToken,e.bidders,e.buyer,e.refundPermit,i,a,n]);return{funds:d.funds,isLoading:s,hasClaimableFunds:d.hasClaimableFunds}},yn={selectedClaimMethod:null,selectedBoxes:null,selectedTokenSymbol:null,selectedTokenAddress:null,selectedTokenDecimals:null,selectedType:null},Sn=e=>String(e),Cn=J((e,t)=>({withdrawData:yn,registeredItems:/* @__PURE__ */new Map,updateWithdrawData:t=>{e(e=>({withdrawData:{...e.withdrawData,...t}}))},resetWithdrawData:()=>{e({withdrawData:yn})},registerSelectableItem:t=>{e(e=>{const n=new Map(e.registeredItems),o=`${Sn(t.boxId)}-${t.tokenSymbol}`;return n.set(o,{...t,boxId:Sn(t.boxId)}),{registeredItems:n}})},unregisterSelectableItem:(t,n)=>{e(e=>{const o=new Map(e.registeredItems),l=`${Sn(t)}-${n}`;return o.delete(l),{registeredItems:o}})},getMatchingItems:(e,n,o)=>{const{registeredItems:l}=t(),r=[];return l.forEach(t=>{t.tokenSymbol===e&&t.type===n&&t.claimMethod===o&&t.hasValidAmount&&r.push(t)}),r},handleRadioSelect:(n,o,l,r,a)=>{const i=Sn(n),s=t().withdrawData;if(!a||"0"===a||parseFloat(a)<=0)return;if(s.selectedTokenSymbol===o&&s.selectedClaimMethod===r&&s.selectedType===l){const t=s.selectedBoxes??[];if(t.includes(i))return;return void e({withdrawData:{...s,selectedBoxes:[...t,i]}})}const d=t().getMatchingItems(o,l,r),c=`${i}-${o}`,u=t().registeredItems.get(c),g=d[0]??u,m=d.map(e=>Sn(e.boxId)),p=m.length>0?m:[i];e({withdrawData:{selectedClaimMethod:r,selectedTokenSymbol:o,selectedTokenAddress:(null==g?void 0:g.tokenAddress)??null,selectedTokenDecimals:(null==g?void 0:g.tokenDecimals)??null,selectedType:l,selectedBoxes:p}})},handleRadioDeselect:t=>{const n=Sn(t);e(e=>{const t=(e.withdrawData.selectedBoxes||[]).filter(e=>e!==n);return 0===t.length?{withdrawData:yn}:{withdrawData:{...e.withdrawData,selectedBoxes:t}}})},isRadioSelected:(e,n)=>{const{selectedTokenSymbol:o,selectedBoxes:l}=t().withdrawData,r=Sn(e);return o===n&&Array.isArray(l)&&l.includes(r)},canClaim:()=>{const{selectedBoxes:e}=t().withdrawData;return Array.isArray(e)&&e.length>0},totalAmount:()=>{const{withdrawData:e,registeredItems:n}=t(),{selectedBoxes:o,selectedTokenSymbol:l}=e;if(!o||0===o.length||!l)return BigInt(0);let r=BigInt(0);return n.forEach(e=>{if(o.includes(e.boxId)&&e.tokenSymbol===l&&e.hasValidAmount)try{r+=BigInt(e.amount||"0")}catch(t){}}),r},addBoxToSelection:t=>{const n=Sn(t);e(e=>{const t=e.withdrawData.selectedBoxes||[];return t.includes(n)?e:{withdrawData:{...e.withdrawData,selectedBoxes:[...t,n]}}})},removeBoxFromSelection:t=>{const n=Sn(t);e(e=>{const t=(e.withdrawData.selectedBoxes||[]).filter(e=>e!==n);return 0===t.length?{withdrawData:yn}:{withdrawData:{...e.withdrawData,selectedBoxes:t}}})},resetAllState:()=>{e({withdrawData:yn,registeredItems:/* @__PURE__ */new Map})}})),Rn=({data:e,userId:n,onCardClick:o,className:l})=>{const r=t.useMemo(()=>String(e.id),[e.id]),{funds:a,hasClaimableFunds:i}=xn({box:e,userId:n}),s=W(e=>e.hasWithdrawInteraction),{address:d}=$(),c=W(t.useMemo(()=>{if(!d||!ee)return()=>[];const e=d.toLowerCase();return t=>{var n,o;return(null==(o=null==(n=t.accounts[ee])?void 0:n[e])?void 0:o.withdrawInteractions)||[]}},[d])),{withdrawData:u,handleRadioSelect:g,handleRadioDeselect:m,isRadioSelected:p,registerSelectableItem:f,unregisterSelectableItem:h}=Cn();t.useEffect(()=>{if(!i)return;const e=a.tokens.filter(e=>e.hasValidAmount);return e.forEach(e=>{const t={boxId:r,tokenSymbol:e.symbol,tokenAddress:e.address,tokenDecimals:e.decimals,type:a.type,claimMethod:a.claimMethod,amount:e.amount,hasValidAmount:e.hasValidAmount};f(t)}),()=>{e.forEach(e=>{h(r,e.symbol)})}},[r,a.tokens,a.type,a.claimMethod,i,f,h]);const w=t.useMemo(()=>({tokenId:e.tokenId,title:e.title||`Box #${e.tokenId}`,description:e.description||"No description available",boxImage:e.boxImage??e.nftImage??e.image,status:e.status,country:e.country,state:e.state,eventDate:e.eventDate}),[e]),v=t.useMemo(()=>a.tokens.map(e=>!!e.address&&s(a.claimMethod,e.address)?{amount:"0",symbol:e.symbol,type:a.type,decimals:e.decimals,disabled:!0}:{amount:e.amount,symbol:e.symbol,type:a.type,decimals:e.decimals,disabled:!e.hasValidAmount||!i}),[a.tokens,a.claimMethod,a.type,i,s,c]),b=t.useMemo(()=>a.tokens.map(e=>e.symbol),[a.tokens]),x=t.useMemo(()=>{for(const e of b)if(p(r,e))return e;return""},[r,b,u.selectedBoxes,p]),y=t.useMemo(()=>({selectedTokenSymbol:x,onCardClick:o,onSelect:e=>{const t=a.tokens.find(t=>t.symbol===e);t&&t.hasValidAmount&&g(r,e,a.type,a.claimMethod,t.amount)},onDeselect:()=>{m(r)}}),[o,x,a.tokens,a.type,a.claimMethod,r,g,m]);/* @__PURE__ */
return B.jsx(pn,{data:w,funds:v,actions:y,className:l})},{Paragraph:In}=K,Mn=({disabled:e=!1,isLoading:t=!1,buttonText:n="Withdraw",message:o="",formattedAmount:l,tokenSymbol:r="",submit:a,cancel:i,className:s,isSuccess:d=!1,error:c})=>{const u=d?{type:"default",icon:/* @__PURE__ */B.jsx(Ee,{}),danger:!1}:c?{type:"primary",icon:/* @__PURE__ */B.jsx(Gt,{}),danger:!0}:{type:"primary",icon:void 0,danger:!1};/* @__PURE__ */
return B.jsx(Z,{type:d?"success":c?"error":"info",showIcon:!0,icon:d?/* @__PURE__ */B.jsx(Ee,{}):t?/* @__PURE__ */B.jsx(Bt,{spin:!0}):void 0,message:d?"Successfully withdrawn!":c?"Withdrawal failed":t?"Processing transaction...":`Withdrawal: ${l} ${r}`,description:/* @__PURE__ */B.jsxs(U,{direction:"horizontal",size:"small",style:{width:"100%"},children:[
/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"small",children:[o&&/* @__PURE__ */B.jsx(In,{type:"secondary",style:{marginBottom:0,fontSize:"12px"},children:o}),c&&/* @__PURE__ */B.jsx(In,{type:"secondary",style:{marginBottom:0,fontSize:"12px"},children:c})]}),
/* @__PURE__ */B.jsxs(U,{direction:"vertical",size:"small",style:{width:"100%"},children:[
/* @__PURE__ */B.jsx(Y,{...u,disabled:e||d,onClick:a,loading:t,size:"middle",block:!0,children:d?"Withdrawn":t?"Withdrawing...":c?"Retry":n}),
/* @__PURE__ */B.jsx(Y,{type:"default",disabled:e||d,onClick:i,size:"middle",block:!0,children:"Cancel"})]})]}),className:s})},jn=["withdrawOrderAmounts","withdrawRefundAmounts"],kn=()=>{var e;const{withdraw:n,isLoading:o,isSuccessed:l,error:r}=(()=>{const e=ce(),t=me(),{writeCustormV3:n,error:o,isLoading:l,isSuccessed:r}=ln();return{withdraw:async()=>{const o=Cn.getState().withdrawData,{selectedBoxes:l,selectedTokenSymbol:r,selectedTokenAddress:a,selectedClaimMethod:i}=o;try{if(!r||!i)throw new Error("Invalid withdraw data");if(!("withdrawOrderAmounts"!==i&&"withdrawRefundAmounts"!==i||l&&0!==l.length))throw new Error("Please select at least one box");const o=e.find(e=>e.symbol===r),s=a??(null==o?void 0:o.address);if(!s)throw new Error("Invalid token");let d=[];return d=[s,(l??[]).map(e=>BigInt(e))],await n({contract:t.FundManager,functionName:i,tokenAddress:s,args:d})}catch(s){throw s}},error:o,isLoading:l,isSuccessed:r}})(),{withdrawData:a,canClaim:i,totalAmount:s,resetWithdrawData:d}=Cn();t.useEffect(()=>{if(l){const e=setTimeout(()=>{d()},2e3);return()=>clearTimeout(e)}},[l,d]);const c=i(),u=a.selectedClaimMethod,g=c&&!!u&&jn.includes(u),m=g?s():BigInt(0),p=a.selectedTokenDecimals??18,f=a.selectedTokenSymbol??"",h=g?ve(m,p,4):"0.0000",w=(null==(e=a.selectedBoxes)?void 0:e.length)??0,v="Refund"===(a.selectedType??null)?"Refund Amount":"Order Amount";const b=g?`Selected ${w} boxes, ready to withdraw ${v}${f?`${f}`:""}`:"Please select the funds to withdraw";return g?/* @__PURE__ */B.jsx(Mn,{formattedAmount:h,tokenSymbol:f,message:b,buttonText:`Withdraw ${v}`,disabled:!g||o,isLoading:o,isSuccess:l,error:null==r?void 0:r.message,submit:()=>{n().catch(e=>{})},cancel:()=>{d()},className:"mb-3!"}):null},Nn=({className:e,animate:n=!0})=>{const o=n?"animate-pulse":"",l=t.useMemo(()=>/* @__PURE__ */B.jsx("style",{children:"\n            .skeleton-profile-mobile {\n                display: block;\n            }\n            .skeleton-profile-desktop {\n                display: none;\n            }\n            @media (min-width: 768px) {\n                .skeleton-profile-mobile {\n                    display: none;\n                }\n                .skeleton-profile-desktop {\n                    display: block;\n                }\n            }\n        "}),[]);/* @__PURE__ */
return B.jsxs(B.Fragment,{children:[l,
/* @__PURE__ */B.jsxs(Ie,{className:e,style:{marginBottom:10},styles:{body:{padding:"10px 13px"}},children:[
/* @__PURE__ */B.jsx("div",{className:"skeleton-profile-mobile",children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],children:[
/* @__PURE__ */B.jsx(ze,{span:24,children:/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx(ye,{active:n,paragraph:{rows:0},title:{width:"80%"},style:{marginBottom:8}}),
/* @__PURE__ */B.jsx(ye,{active:n,paragraph:{rows:3,width:["100%","75%","50%"]},title:!1,style:{marginBottom:8}}),
/* @__PURE__ */B.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-16",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-20",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-24",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-20",o)})]})]})}),
/* @__PURE__ */B.jsx(ze,{span:24,children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],align:"middle",children:[
/* @__PURE__ */B.jsx(ze,{span:9,children:/* @__PURE__ */B.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:/* @__PURE__ */B.jsx("div",{className:O("bg-white/20 rounded","w-[100px] h-[100px]",o)})})}),
/* @__PURE__ */B.jsx(ze,{span:15,children:/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx("div",{className:O("h-5 bg-white/20 rounded mb-3","w-32",o)}),
/* @__PURE__ */B.jsx("div",{children:/* @__PURE__ */B.jsx("div",{className:O("p-[6px_10px] border border-white/20 rounded-lg mb-2",o),children:/* @__PURE__ */B.jsxs("div",{className:"flex items-center gap-2",children:[
/* @__PURE__ */B.jsx("div",{className:O("w-4 h-4 bg-white/20 rounded-full shrink-0",o)}),
/* @__PURE__ */B.jsxs("div",{className:"flex-1",children:[
/* @__PURE__ */B.jsx("div",{className:O("h-4 bg-white/20 rounded mb-1","w-20",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-3 bg-white/20 rounded","w-12",o)})]})]})})})]})})]})})]})}),
/* @__PURE__ */B.jsx("div",{className:"skeleton-profile-desktop",children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],align:"middle",children:[
/* @__PURE__ */B.jsx(ze,{md:16,lg:17,xl:18,children:/* @__PURE__ */B.jsxs(Fe,{gutter:[12,12],align:"top",children:[
/* @__PURE__ */B.jsx(ze,{md:8,lg:7,xl:6,children:/* @__PURE__ */B.jsx("div",{style:{display:"flex",justifyContent:"center"},children:/* @__PURE__ */B.jsx("div",{className:O("bg-white/20 rounded","w-[110px] h-[110px]",o)})})}),
/* @__PURE__ */B.jsx(ze,{md:16,lg:17,xl:18,children:/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx(ye,{active:n,paragraph:{rows:0},title:{width:"75%"},style:{marginBottom:8}}),
/* @__PURE__ */B.jsx(ye,{active:n,paragraph:{rows:3,width:["100%","80%","60%"]},title:!1,style:{marginBottom:8}}),
/* @__PURE__ */B.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-16",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-20",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-24",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-6 bg-white/20 rounded-md","w-20",o)})]})]})})]})}),
/* @__PURE__ */B.jsx(ze,{md:8,lg:7,xl:6,children:/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx("div",{className:O("h-5 bg-white/20 rounded mb-3","w-32",o)}),
/* @__PURE__ */B.jsxs("div",{children:[
/* @__PURE__ */B.jsx("div",{className:O("p-[6px_10px] border border-white/20 rounded-lg mb-2",o),children:/* @__PURE__ */B.jsxs("div",{className:"flex items-center gap-2",children:[
/* @__PURE__ */B.jsx("div",{className:O("w-4 h-4 bg-white/20 rounded-full shrink-0",o)}),
/* @__PURE__ */B.jsxs("div",{className:"flex-1",children:[
/* @__PURE__ */B.jsx("div",{className:O("h-4 bg-white/20 rounded mb-1","w-20",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-3 bg-white/20 rounded","w-12",o)})]})]})}),
/* @__PURE__ */B.jsx("div",{className:O("p-[6px_10px] border border-white/20 rounded-lg",o),children:/* @__PURE__ */B.jsxs("div",{className:"flex items-center gap-2",children:[
/* @__PURE__ */B.jsx("div",{className:O("w-4 h-4 bg-white/20 rounded-full shrink-0",o)}),
/* @__PURE__ */B.jsxs("div",{className:"flex-1",children:[
/* @__PURE__ */B.jsx("div",{className:O("h-4 bg-white/20 rounded mb-1","w-16",o)}),
/* @__PURE__ */B.jsx("div",{className:O("h-3 bg-white/20 rounded","w-10",o)})]})]})})]})]})})]})})]})]})},Pn={white:"text-white","gray-3":"text-gray-300","gray-5":"text-gray-500",black:"text-black","muted-foreground":"text-muted-foreground",primary:"text-primary",secondary:"text-secondary"},En={xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg"},Fn={light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold"},zn={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6",none:""};function Dn({children:e,color:t="white",size:n="md",weight:o="normal",lineClamp:l=2,isCopy:r=!1,className:a,maxLength:i,maxWidth:s}){const d=null==a?void 0:a.match(/text-(xs|sm|md|lg)/);let c=e,u=!1;"string"==typeof e&&i&&e.length>i&&(c=e.slice(0,i)+"...",u=!0);const g=String(c),m=String(e);/* @__PURE__ */
return B.jsx(K.Paragraph,{className:O("leading-relaxed font-mono",Pn[t],!d&&En[n],Fn[o],zn[l],a),style:s?{maxWidth:"number"==typeof s?s+"px":s}:void 0,title:u?m:void 0,copyable:!!r&&{text:m,icon:[/* @__PURE__ */B.jsx($t,{className:"h-4 w-4"},"copy"),/* @__PURE__ */B.jsx(qt,{className:"h-4 w-4 text-green-500"},"check")],tooltips:["Copy","Copied!"]},children:g})}function _n({open:e,closable:t=!1,onCancel:n,title:o="Loading..."}){/* @__PURE__ */
return B.jsx(pe,{open:e,footer:null,closable:t,onCancel:n,maskClosable:!1,centered:!0,width:600,children:/* @__PURE__ */B.jsxs("div",{className:"flex flex-col justify-center items-center gap-4 h-full",children:[
/* @__PURE__ */B.jsx(Dn,{color:"muted-foreground",className:"mb-4",children:o}),
/* @__PURE__ */B.jsx("div",{className:"flex justify-center items-center",children:/* @__PURE__ */B.jsx(_e,{className:"animate-spin",size:30})})]})})}const Ln=e=>e?"object"==typeof e&&"message"in e?e:new Error("Unknown Supabase error"):null;const An=(e,t)=>{const{network:n,layer:o}=H,{data:l,isLoading:r,isError:a,error:i,isSuccess:s}=G({queryKey:["user-profile",n,o,e,t],queryFn:async()=>{if(!e)return null;const n=await async function(e,t){try{const n={totalBoxes:0,ownedBoxes:0,mintedBoxes:0,soldBoxes:0,boughtBoxes:0,bidBoxes:0,completedBoxes:0,publishedBoxes:0},{count:o}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("owner_address",e.toLowerCase());if(n.ownedBoxes=o||0,t){const{count:o}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("minter_id",t);n.mintedBoxes=o||0;const{count:l}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("seller_id",t);n.soldBoxes=l||0;const{count:r}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("buyer_id",t);n.boughtBoxes=r||0;const{count:a}=await fe.from("box_bidders").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("bidder_id",t);n.bidBoxes=a||0;const{count:i}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("completer_id",t);n.completedBoxes=i||0;const{count:s}=await fe.from("boxes").select("*",{count:"exact",head:!0}).eq("network",H.network).eq("layer",H.layer).eq("publisher_id",t);n.publishedBoxes=s||0;const{data:d}=await fe.from("boxes").select("id").eq("network",H.network).eq("layer",H.layer).or(`owner_address.eq.${e.toLowerCase()},minter_id.eq.${t},seller_id.eq.${t},buyer_id.eq.${t},completer_id.eq.${t},publisher_id.eq.${t}`),{data:c}=await fe.from("box_bidders").select("id").eq("network",H.network).eq("layer",H.layer).eq("bidder_id",t),u=/* @__PURE__ */new Set;null==d||d.forEach(e=>u.add(e.id)),null==c||c.forEach(e=>u.add(e.id)),n.totalBoxes=u.size}else n.totalBoxes=n.ownedBoxes;return{data:n,error:null}}catch(i){return{data:null,error:Ln(i)}}}(e,t);if(n.error)throw n.error;return n.data},enabled:!!e,staleTime:3e4});return{data:l?{id:t||e,address:e||"",stats:{totalBoxes:l.totalBoxes,ownedBoxes:l.ownedBoxes,mintedBoxes:l.mintedBoxes,soldBoxes:l.soldBoxes,boughtBoxes:l.boughtBoxes,bidBoxes:l.bidBoxes,completedBoxes:l.completedBoxes,publishedBoxes:l.publishedBoxes},allBoxes:[],ownedBoxes:[],mintedBoxes:[],soldBoxes:[],boughtBoxes:[],bidBoxes:[],completedBoxes:[],publishedBoxes:[]}:null,isLoading:r,isError:a,error:i||null,isSuccess:s}},Tn=e=>{var t;const n=e.metadata_boxes,o=calculateStatus(e.status,e.deadline,e.buyer_id);return{id:e.id,tokenId:e.token_id,price:e.price,deadline:e.deadline,status:o,createTimestamp:e.create_timestamp,boxInfoCID:e.box_info_cid||void 0,acceptedToken:e.accepted_token||void 0,refundPermit:e.refund_permit||!1,listedMode:e.listed_mode||void 0,owner:{id:e.owner_address},minter:{id:e.minter_id},seller:e.seller_id?{id:e.seller_id}:void 0,buyer:e.buyer_id?{id:e.buyer_id}:void 0,completer:e.completer_id?{id:e.completer_id}:void 0,publisher:e.publisher_id?{id:e.publisher_id}:void 0,bidders:(null==(t=e.box_bidders)?void 0:t.map(e=>({id:e.bidder_id})))||[],title:(null==n?void 0:n.title)||void 0,description:(null==n?void 0:n.description)||void 0,nftImage:(null==n?void 0:n.nft_image)||void 0,boxImage:(null==n?void 0:n.box_image)||void 0,country:(null==n?void 0:n.country)||void 0,state:(null==n?void 0:n.state)||void 0,eventDate:(null==n?void 0:n.event_date)||void 0,typeOfCrime:(null==n?void 0:n.type_of_crime)||void 0,hasError:!1}},Vn=(e,t,n)=>{const{network:o,layer:l}=H,{data:r,isLoading:a,isError:i,error:s,isSuccess:d,fetchNextPage:c,hasNextPage:u,isFetchingNextPage:g}=(m={queryKey:["user-boxes",o,l,e,n,t],queryFn:async({pageParam:o})=>{if(!e)return{items:[],hasMore:!1};const l=await async function(e,t,n,o=20,l=0){try{let r=fe.from("boxes").select("\n                *,\n                metadata_boxes (*),\n                box_bidders (*)\n            ").eq("network",H.network).eq("layer",H.layer);switch(n.selectedTab){case"owned":r=r.eq("owner_address",e.toLowerCase());break;case"minted":if(!t)return{data:[],error:null};r=r.eq("minter_id",t);break;case"sold":if(!t)return{data:[],error:null};r=r.eq("seller_id",t);break;case"bought":if(!t)return{data:[],error:null};r=r.eq("buyer_id",t);break;case"bade":if(!t)return{data:[],error:null};const{data:n,error:o}=await fe.from("box_bidders").select("id").eq("network",H.network).eq("layer",H.layer).eq("bidder_id",t);if(o)return{data:null,error:o};const l=(null==n?void 0:n.map(e=>e.id))||[];if(0===l.length)return{data:[],error:null};r=r.in("id",l);break;case"completed":if(!t)return{data:[],error:null};r=r.eq("completer_id",t);break;case"published":if(!t)return{data:[],error:null};r=r.eq("publisher_id",t);break;default:r=t?r.or(`owner_address.eq.${e.toLowerCase()},minter_id.eq.${t},seller_id.eq.${t},buyer_id.eq.${t},completer_id.eq.${t},publisher_id.eq.${t}`):r.eq("owner_address",e.toLowerCase())}switch(n.selectedStatus&&(r=r.eq("status",n.selectedStatus)),n.orderBy){case"tokenId":r=r.order("id",{ascending:"asc"===n.orderDirection});break;case"price":r=r.order("price",{ascending:"asc"===n.orderDirection});break;case"createTimestamp":r=r.order("create_timestamp",{ascending:"asc"===n.orderDirection});break;default:r=r.order("create_timestamp",{ascending:!1})}r=r.range(l,l+o-1);const{data:a,error:i}=await r;return i?{data:null,error:i}:{data:a,error:null}}catch(s){return{data:null,error:Ln(s)}}}(e,n,t,20,o);if(l.error)throw l.error;const r=(l.data||[]).map(Tn);return{items:r,hasMore:20===r.length}},initialPageParam:0,getNextPageParam:(e,t)=>{if(e.hasMore)return t.reduce((e,t)=>e+t.items.length,0)},enabled:!!e,staleTime:3e4},A(m,Pt));var m;return{data:{pages:(null==r?void 0:r.pages)||[{items:[],hasMore:!1}],pageParams:(null==r?void 0:r.pageParams)||[0]},isLoading:a,isError:i,error:s||null,isSuccess:d,fetchNextPage:c,hasNextPage:u||!1,isFetchingNextPage:g}};function Bn(e,t){return"function"==typeof e?e(t):e}function On(e,t){return n=>{t.setState(t=>({...t,[e]:Bn(n,t[e])}))}}function Hn(e){return e instanceof Function}function Gn(e,t,n){let o,l=[];return r=>{let a;n.key&&n.debug&&(a=Date.now());const i=e(r);if(!(i.length!==l.length||i.some((e,t)=>l[t]!==e)))return o;let s;if(l=i,n.key&&n.debug&&(s=Date.now()),o=t(...i),null==n||null==n.onChange||n.onChange(o),n.key&&n.debug&&null!=n&&n.debug()){Math.round(100*(Date.now()-a)),Math.round(100*(Date.now()-s))}return o}}function qn(e,t,n,o){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:o}}const $n="debugHeaders";function Wn(e,t,n){var o;let l={id:null!=(o=n.id)?o:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}const Xn={createTable:e=>{e.getHeaderGroups=Gn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,l)=>{var r,a;const i=null!=(r=null==o?void 0:o.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[],s=null!=(a=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[];return Yn(t,[...i,...n.filter(e=>!(null!=o&&o.includes(e.id)||null!=l&&l.includes(e.id))),...s],e)},qn(e.options,$n)),e.getCenterHeaderGroups=Gn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,l)=>Yn(t,n=n.filter(e=>!(null!=o&&o.includes(e.id)||null!=l&&l.includes(e.id))),e,"center"),qn(e.options,$n)),e.getLeftHeaderGroups=Gn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,o)=>{var l;return Yn(t,null!=(l=null==o?void 0:o.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},qn(e.options,$n)),e.getRightHeaderGroups=Gn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,o)=>{var l;return Yn(t,null!=(l=null==o?void 0:o.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},qn(e.options,$n)),e.getFooterGroups=Gn(()=>[e.getHeaderGroups()],e=>[...e].reverse(),qn(e.options,$n)),e.getLeftFooterGroups=Gn(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),qn(e.options,$n)),e.getCenterFooterGroups=Gn(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),qn(e.options,$n)),e.getRightFooterGroups=Gn(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),qn(e.options,$n)),e.getFlatHeaders=Gn(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),qn(e.options,$n)),e.getLeftFlatHeaders=Gn(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),qn(e.options,$n)),e.getCenterFlatHeaders=Gn(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),qn(e.options,$n)),e.getRightFlatHeaders=Gn(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),qn(e.options,$n)),e.getCenterLeafHeaders=Gn(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),qn(e.options,$n)),e.getLeftLeafHeaders=Gn(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),qn(e.options,$n)),e.getRightLeafHeaders=Gn(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),qn(e.options,$n)),e.getLeafHeaders=Gn(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var o,l,r,a,i,s;return[...null!=(o=null==(l=e[0])?void 0:l.headers)?o:[],...null!=(r=null==(a=t[0])?void 0:a.headers)?r:[],...null!=(i=null==(s=n[0])?void 0:s.headers)?i:[]].map(e=>e.getLeafHeaders()).flat()},qn(e.options,$n))}};function Yn(e,t,n,o){var l,r;let a=0;const i=function(e,t){void 0===t&&(t=1),a=Math.max(a,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&i(e.columns,t+1)},0)};i(e);let s=[];const d=(e,t)=>{const l={depth:t,id:[o,`${t}`].filter(Boolean).join("_"),headers:[]},r=[];e.forEach(e=>{const a=[...r].reverse()[0];let i,s=!1;if(e.column.depth===l.depth&&e.column.parent?i=e.column.parent:(i=e.column,s=!0),a&&(null==a?void 0:a.column)===i)a.subHeaders.push(e);else{const l=Wn(n,i,{id:[o,t,i.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:s,placeholderId:s?`${r.filter(e=>e.column===i).length}`:void 0,depth:t,index:r.length});l.subHeaders.push(e),r.push(l)}l.headers.push(e),e.headerGroup=l}),s.push(l),t>0&&d(r,t-1)},c=t.map((e,t)=>Wn(n,e,{depth:a,index:t}));d(c,a-1),s.reverse();const u=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,o=[0];e.subHeaders&&e.subHeaders.length?(o=[],u(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,o.push(l)})):t=1;return n+=Math.min(...o),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return u(null!=(l=null==(r=s[0])?void 0:r.headers)?l:[]),s}const Un=(e,t,n,o,l,r,a)=>{let i={id:t,index:o,original:n,depth:l,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(i._valuesCache.hasOwnProperty(t))return i._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(i._valuesCache[t]=n.accessorFn(i.original,o),i._valuesCache[t]):void 0},getUniqueValues:t=>{if(i._uniqueValuesCache.hasOwnProperty(t))return i._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(i._uniqueValuesCache[t]=n.columnDef.getUniqueValues(i.original,o),i._uniqueValuesCache[t]):(i._uniqueValuesCache[t]=[i.getValue(t)],i._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=i.getValue(t))?n:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>function(e,t){const n=[],o=e=>{e.forEach(e=>{n.push(e);const l=t(e);null!=l&&l.length&&o(l)})};return o(e),n}(i.subRows,e=>e.subRows),getParentRow:()=>i.parentId?e.getRow(i.parentId,!0):void 0,getParentRows:()=>{let e=[],t=i;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:Gn(()=>[e.getAllLeafColumns()],t=>t.map(t=>function(e,t,n,o){const l={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(o),renderValue:()=>{var t;return null!=(t=l.getValue())?t:e.options.renderFallbackValue},getContext:Gn(()=>[e,n,t,l],(e,t,n,o)=>({table:e,column:t,row:n,cell:o,getValue:o.getValue,renderValue:o.renderValue}),qn(e.options,"debugCells"))};return e._features.forEach(o=>{null==o.createCell||o.createCell(l,n,t,e)},{}),l}(e,i,t,t.id)),qn(e.options,"debugRows")),_getAllCellsByColumnId:Gn(()=>[i.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),qn(e.options,"debugRows"))};for(let s=0;s<e._features.length;s++){const t=e._features[s];null==t||null==t.createRow||t.createRow(i,e)}return i},Zn={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():/* @__PURE__ */new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Kn=(e,t,n)=>{var o,l;const r=null==n||null==(o=n.toString())?void 0:o.toLowerCase();return Boolean(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(r))};Kn.autoRemove=e=>io(e);const Qn=(e,t,n)=>{var o;return Boolean(null==(o=e.getValue(t))||null==(o=o.toString())?void 0:o.includes(n))};Qn.autoRemove=e=>io(e);const Jn=(e,t,n)=>{var o;return(null==(o=e.getValue(t))||null==(o=o.toString())?void 0:o.toLowerCase())===(null==n?void 0:n.toLowerCase())};Jn.autoRemove=e=>io(e);const eo=(e,t,n)=>{var o;return null==(o=e.getValue(t))?void 0:o.includes(n)};eo.autoRemove=e=>io(e);const to=(e,t,n)=>!n.some(n=>{var o;return!(null!=(o=e.getValue(t))&&o.includes(n))});to.autoRemove=e=>io(e)||!(null!=e&&e.length);const no=(e,t,n)=>n.some(n=>{var o;return null==(o=e.getValue(t))?void 0:o.includes(n)});no.autoRemove=e=>io(e)||!(null!=e&&e.length);const oo=(e,t,n)=>e.getValue(t)===n;oo.autoRemove=e=>io(e);const lo=(e,t,n)=>e.getValue(t)==n;lo.autoRemove=e=>io(e);const ro=(e,t,n)=>{let[o,l]=n;const r=e.getValue(t);return r>=o&&r<=l};ro.resolveFilterValue=e=>{let[t,n]=e,o="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,r=null===t||Number.isNaN(o)?-1/0:o,a=null===n||Number.isNaN(l)?1/0:l;if(r>a){const e=r;r=a,a=e}return[r,a]},ro.autoRemove=e=>io(e)||io(e[0])&&io(e[1]);const ao={includesString:Kn,includesStringSensitive:Qn,equalsString:Jn,arrIncludes:eo,arrIncludesAll:to,arrIncludesSome:no,equals:oo,weakEquals:lo,inNumberRange:ro};function io(e){return null==e||""===e}const so={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:On("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=null==n?void 0:n.getValue(e.id);return"string"==typeof o?ao.includesString:"number"==typeof o?ao.inNumberRange:"boolean"==typeof o||null!==o&&"object"==typeof o?ao.equals:Array.isArray(o)?ao.arrIncludes:ao.weakEquals},e.getFilterFn=()=>{var n,o;return Hn(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(o=t.options.filterFns)?void 0:o[e.columnDef.filterFn])?n:ao[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,o,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(o=t.options.enableColumnFilters)||o)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,o;return null!=(n=null==(o=t.getState().columnFilters)?void 0:o.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{const o=e.getFilterFn(),l=null==t?void 0:t.find(t=>t.id===e.id),r=Bn(n,l?l.value:void 0);var a;if(co(o,r,e))return null!=(a=null==t?void 0:t.filter(t=>t.id!==e.id))?a:[];const i={id:e.id,value:r};var s;return l?null!=(s=null==t?void 0:t.map(t=>t.id===e.id?i:t))?s:[]:null!=t&&t.length?[...t,i]:[i]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var o;return null==(o=Bn(t,e))?void 0:o.filter(e=>{const t=n.find(t=>t.id===e.id);if(t){if(co(t.getFilterFn(),e.value,t))return!1}return!0})})},e.resetColumnFilters=t=>{var n,o;e.setColumnFilters(t?[]:null!=(n=null==(o=e.initialState)?void 0:o.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function co(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const uo={sum:(e,t,n)=>n.reduce((t,n)=>{const o=n.getValue(e);return t+("number"==typeof o?o:0)},0),min:(e,t,n)=>{let o;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(o>n||void 0===o&&n>=n)&&(o=n)}),o},max:(e,t,n)=>{let o;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(o<n||void 0===o&&n>=n)&&(o=n)}),o},extent:(e,t,n)=>{let o,l;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(void 0===o?n>=n&&(o=l=n):(o>n&&(o=n),l<n&&(l=n)))}),[o,l]},mean:(e,t)=>{let n=0,o=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l=+l)>=l&&(++n,o+=l)}),n)return o/n},median:(e,t)=>{if(!t.length)return;const n=t.map(t=>t.getValue(e));if(o=n,!Array.isArray(o)||!o.every(e=>"number"==typeof e))return;var o;if(1===n.length)return n[0];const l=Math.floor(n.length/2),r=n.sort((e,t)=>e-t);return n.length%2!=0?r[l]:(r[l-1]+r[l])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},go={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:On("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,o;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(o=t.options.enableGrouping)||o)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=null==n?void 0:n.getValue(e.id);return"number"==typeof o?uo.sum:"[object Date]"===Object.prototype.toString.call(o)?uo.extent:void 0},e.getAggregationFn=()=>{var n,o;if(!e)throw new Error;return Hn(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(o=t.options.aggregationFns)?void 0:o[e.columnDef.aggregationFn])?n:uo[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,o;e.setGrouping(t?[]:null!=(n=null==(o=e.initialState)?void 0:o.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const o=t.getColumn(n);return null!=o&&o.columnDef.getGroupingValue?(e._groupingValuesCache[n]=o.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,o)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}}};const mo={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:On("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Gn(e=>[bo(t,e)],t=>t.findIndex(t=>t.id===e.id),qn(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var o;return(null==(o=bo(t,n)[0])?void 0:o.id)===e.id},e.getIsLastColumn=n=>{var o;const l=bo(t,n);return(null==(o=l[l.length-1])?void 0:o.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=Gn(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>o=>{let l=[];if(null!=e&&e.length){const t=[...e],n=[...o];for(;n.length&&t.length;){const e=t.shift(),o=n.findIndex(t=>t.id===e);o>-1&&l.push(n.splice(o,1)[0])}l=[...l,...n]}else l=o;return function(e,t,n){if(null==t||!t.length||!n)return e;const o=e.filter(e=>!t.includes(e.id));return"remove"===n?o:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...o]}(l,t,n)},qn(e.options,"debugTable"))}},po={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:On("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const o=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,r,a,i,s;return"right"===n?{left:(null!=(r=null==e?void 0:e.left)?r:[]).filter(e=>!(null!=o&&o.includes(e))),right:[...(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=o&&o.includes(e))),...o]}:"left"===n?{left:[...(null!=(i=null==e?void 0:e.left)?i:[]).filter(e=>!(null!=o&&o.includes(e))),...o],right:(null!=(s=null==e?void 0:e.right)?s:[]).filter(e=>!(null!=o&&o.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=o&&o.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=o&&o.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,o,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(o=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||o)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(e=>e.id),{left:o,right:l}=t.getState().columnPinning,r=n.some(e=>null==o?void 0:o.includes(e)),a=n.some(e=>null==l?void 0:l.includes(e));return r?"left":!!a&&"right"},e.getPinnedIndex=()=>{var n,o;const l=e.getIsPinned();return l?null!=(n=null==(o=t.getState().columnPinning)||null==(o=o[l])?void 0:o.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Gn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{const o=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!o.includes(e.column.id))},qn(t.options,"debugRows")),e.getLeftVisibleCells=Gn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),qn(t.options,"debugRows")),e.getRightVisibleCells=Gn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),qn(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,o;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(o=e.initialState)?void 0:o.columnPinning)?n:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var n;const o=e.getState().columnPinning;var l,r;return t?Boolean(null==(n=o[t])?void 0:n.length):Boolean((null==(l=o.left)?void 0:l.length)||(null==(r=o.right)?void 0:r.length))},e.getLeftLeafColumns=Gn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),qn(e.options,"debugColumns")),e.getRightLeafColumns=Gn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),qn(e.options,"debugColumns")),e.getCenterLeafColumns=Gn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{const o=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!o.includes(e.id))},qn(e.options,"debugColumns"))}};const fo={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ho={getDefaultColumnDef:()=>fo,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:On("columnSizing",e),onColumnSizingInfoChange:On("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,o,l;const r=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:fo.minSize,null!=(o=null!=r?r:e.columnDef.size)?o:fo.size),null!=(l=e.columnDef.maxSize)?l:fo.maxSize)},e.getStart=Gn(e=>[e,bo(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),qn(t.options,"debugColumns")),e.getAfter=Gn(e=>[e,bo(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),qn(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...o}=t;return o})},e.getCanResize=()=>{var n,o;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(o=t.options.enableColumnResizing)||o)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const n=e=>{var o;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(o=e.column.getSize())?o:0};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{const o=t.getColumn(e.column.id),l=null==o?void 0:o.getCanResize();return r=>{if(!o||!l)return;if(null==r.persist||r.persist(),vo(r)&&r.touches&&r.touches.length>1)return;const a=e.getSize(),i=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[o.id,o.getSize()]],s=vo(r)?Math.round(r.touches[0].clientX):r.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var o,l;const r="rtl"===t.options.columnResizeDirection?-1:1,a=(n-(null!=(o=null==e?void 0:e.startOffset)?o:0))*r,i=Math.max(a/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*i,0))/100}),{...e,deltaOffset:a,deltaPercentage:i}}),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing(e=>({...e,...d})))},u=e=>c("move",e),g=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=n||("undefined"!=typeof document?document:null);const p={moveHandler:e=>u(e.clientX),upHandler:e=>{null==m||m.removeEventListener("mousemove",p.moveHandler),null==m||m.removeEventListener("mouseup",p.upHandler),g(e.clientX)}},f={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(e.touches[0].clientX),!1),upHandler:e=>{var t;null==m||m.removeEventListener("touchmove",f.moveHandler),null==m||m.removeEventListener("touchend",f.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),g(null==(t=e.touches[0])?void 0:t.clientX)}},h=!!function(){if("boolean"==typeof wo)return wo;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return wo=e,wo}()&&{passive:!1};vo(r)?(null==m||m.addEventListener("touchmove",f.moveHandler,h),null==m||m.addEventListener("touchend",f.upHandler,h)):(null==m||m.addEventListener("mousemove",p.moveHandler,h),null==m||m.addEventListener("mouseup",p.upHandler,h)),t.setColumnSizingInfo(e=>({...e,startOffset:s,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:i,isResizingColumn:o.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}};let wo=null;function vo(e){return"touchstart"===e.type}function bo(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const xo={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:On("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const o={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(o[e.id]=!0)}):l.forEach(e=>{delete o[e.id]}),o})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const o=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{yo(l,t.id,o,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Gn(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?So(e,n):{rows:[],flatRows:[],rowsById:{}},qn(e.options,"debugTable")),e.getFilteredSelectedRowModel=Gn(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?So(e,n):{rows:[],flatRows:[],rowsById:{}},qn(e.options,"debugTable")),e.getGroupedSelectedRowModel=Gn(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?So(e,n):{rows:[],flatRows:[],rowsById:{}},qn(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let o=Boolean(t.length&&Object.keys(n).length);return o&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(o=!1),o},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState();let o=!!t.length;return o&&t.some(e=>!n[e.id])&&(o=!1),o},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,o)=>{const l=e.getIsSelected();t.setRowSelection(r=>{var a;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return r;const i={...r};return yo(i,e.id,n,null==(a=null==o?void 0:o.selectChildren)||a,t),i})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Co(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return"some"===Ro(e,n)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return"all"===Ro(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var o;t&&e.toggleSelected(null==(o=n.target)?void 0:o.checked)}}}},yo=(e,t,n,o,l)=>{var r;const a=l.getRow(t,!0);n?(a.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),a.getCanSelect()&&(e[t]=!0)):delete e[t],o&&null!=(r=a.subRows)&&r.length&&a.getCanSelectSubRows()&&a.subRows.forEach(t=>yo(e,t.id,n,o,l))};function So(e,t){const n=e.getState().rowSelection,o=[],l={},r=function(e,t){return e.map(e=>{var t;const a=Co(e,n);if(a&&(o.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:r(e.subRows)}),a)return e}).filter(Boolean)};return{rows:r(t.rows),flatRows:o,rowsById:l}}function Co(e,t){var n;return null!=(n=t[e.id])&&n}function Ro(e,t,n){var o;if(null==(o=e.subRows)||!o.length)return!1;let l=!0,r=!1;return e.subRows.forEach(e=>{if((!r||l)&&(e.getCanSelect()&&(Co(e,t)?r=!0:l=!1),e.subRows&&e.subRows.length)){const n=Ro(e,t);"all"===n?r=!0:"some"===n?(r=!0,l=!1):l=!1}}),l?"all":!!r&&"some"}const Io=/([0-9]+)/gm;function Mo(e,t){return e===t?0:e>t?1:-1}function jo(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function ko(e,t){const n=e.split(Io).filter(Boolean),o=t.split(Io).filter(Boolean);for(;n.length&&o.length;){const e=n.shift(),t=o.shift(),l=parseInt(e,10),r=parseInt(t,10),a=[l,r].sort();if(isNaN(a[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(a[1]))return isNaN(l)?-1:1;if(l>r)return 1;if(r>l)return-1}}return n.length-o.length}const No={alphanumeric:(e,t,n)=>ko(jo(e.getValue(n)).toLowerCase(),jo(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>ko(jo(e.getValue(n)),jo(t.getValue(n))),text:(e,t,n)=>Mo(jo(e.getValue(n)).toLowerCase(),jo(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>Mo(jo(e.getValue(n)),jo(t.getValue(n))),datetime:(e,t,n)=>{const o=e.getValue(n),l=t.getValue(n);return o>l?1:o<l?-1:0},basic:(e,t,n)=>Mo(e.getValue(n),t.getValue(n))},Po=[Xn,{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:On("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,o;const l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(o=t.getState().columnVisibility)?void 0:o[e.id])||n},e.getCanHide=()=>{var n,o;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(o=t.options.enableHiding)||o)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Gn(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),qn(t.options,"debugRows")),e.getVisibleCells=Gn(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],qn(t.options,"debugRows"))},createTable:e=>{const t=(t,n)=>Gn(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),qn(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t(0,()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t(0,()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t(0,()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t(0,()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},mo,po,Zn,so,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():/* @__PURE__ */new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:On("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const o=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof o||"number"==typeof o}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,o,l,r;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(o=t.options.enableGlobalFilter)||o)&&(null==(l=t.options.enableFilters)||l)&&(null==(r=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||r)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>ao.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:o}=e.options;return Hn(o)?o:"auto"===o?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[o])?t:ao[o]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:On("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let o=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return No.datetime;if("string"==typeof n&&(o=!0,n.split(Io).length>1))return No.alphanumeric}return o?No.text:No.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,o;if(!e)throw new Error;return Hn(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(o=t.options.sortingFns)?void 0:o[e.columnDef.sortingFn])?n:No[e.columnDef.sortingFn]},e.toggleSorting=(n,o)=>{const l=e.getNextSortingOrder(),r=null!=n;t.setSorting(a=>{const i=null==a?void 0:a.find(t=>t.id===e.id),s=null==a?void 0:a.findIndex(t=>t.id===e.id);let d,c=[],u=r?n:"desc"===l;var g;(d=null!=a&&a.length&&e.getCanMultiSort()&&o?i?"toggle":"add":null!=a&&a.length&&s!==a.length-1?"replace":i?"toggle":"replace","toggle"===d&&(r||l||(d="remove")),"add"===d)?(c=[...a,{id:e.id,desc:u}],c.splice(0,c.length-(null!=(g=t.options.maxMultiSortColCount)?g:Number.MAX_SAFE_INTEGER))):c="toggle"===d?a.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===d?a.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,o;return(null!=(n=null!=(o=e.columnDef.sortDescFirst)?o:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var o,l;const r=e.getFirstSortDir(),a=e.getIsSorted();return a?!!(a===r||null!=(o=t.options.enableSortingRemoval)&&!o||n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===a?"asc":"desc"):r},e.getCanSort=()=>{var n,o;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(o=t.options.enableSorting)||o)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,o;return null!=(n=null!=(o=e.columnDef.enableMultiSort)?o:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const o=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!o&&(o.desc?"desc":"asc")},e.getSortIndex=()=>{var n,o;return null!=(n=null==(o=t.getState().sorting)?void 0:o.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return o=>{n&&(null==o.persist||o.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(o))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,o;e.setSorting(t?[]:null!=(n=null==(o=e.initialState)?void 0:o.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},go,{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:On("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var o,l;if(t){if(null!=(o=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?o:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}}else e._queue(()=>{t=!0})},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,o;e.setExpanded(t?{}:null!=(n=null==(o=e.initialState)?void 0:o.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some(e=>!e.getIsExpanded())},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{const n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(o=>{var l;const r=!0===o||!(null==o||!o[e.id]);let a={};if(!0===o?Object.keys(t.getRowModel().rowsById).forEach(e=>{a[e]=!0}):a=o,n=null!=(l=n)?l:!r,!r&&n)return{...a,[e.id]:!0};if(r&&!n){const{[e.id]:t,...n}=a;return n}return o})},e.getIsExpanded=()=>{var n;const o=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===o||(null==o?void 0:o[e.id]))},e.getCanExpand=()=>{var n,o,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(o=t.options.enableExpanding)||o)&&!(null==(l=e.subRows)||!l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,o=e;for(;n&&o.parentId;)o=t.getRow(o.parentId,!0),n=o.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:On("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var o,l;if(t){if(null!=(o=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?o:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}}else e._queue(()=>{t=!0})},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>Bn(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination(n=>{let o=Bn(t,n.pageIndex);const l=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...n,pageIndex:o}})},e.resetPageIndex=t=>{var n,o;e.setPageIndex(t?0:null!=(n=null==(o=e.initialState)||null==(o=o.pagination)?void 0:o.pageIndex)?n:0)},e.resetPageSize=t=>{var n,o;e.setPageSize(t?10:null!=(n=null==(o=e.initialState)||null==(o=o.pagination)?void 0:o.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{const n=Math.max(1,Bn(t,e.pageSize)),o=e.pageSize*e.pageIndex,l=Math.floor(o/n);return{...e,pageIndex:l,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var o;let l=Bn(t,null!=(o=e.options.pageCount)?o:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=Gn(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map((e,t)=>t)),t},qn(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:On("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,o,l)=>{const r=o?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],a=l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],i=/* @__PURE__ */new Set([...a,e.id,...r]);t.setRowPinning(e=>{var t,o,l,r,a,s;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=i&&i.has(e))),bottom:[...(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=i&&i.has(e))),...Array.from(i)]}:"top"===n?{top:[...(null!=(a=null==e?void 0:e.top)?a:[]).filter(e=>!(null!=i&&i.has(e))),...Array.from(i)],bottom:(null!=(s=null==e?void 0:e.bottom)?s:[]).filter(e=>!(null!=i&&i.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=i&&i.has(e))),bottom:(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=i&&i.has(e)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:o,enablePinning:l}=t.options;return"function"==typeof o?o(e):null==(n=null!=o?o:l)||n},e.getIsPinned=()=>{const n=[e.id],{top:o,bottom:l}=t.getState().rowPinning,r=n.some(e=>null==o?void 0:o.includes(e)),a=n.some(e=>null==l?void 0:l.includes(e));return r?"top":!!a&&"bottom"},e.getPinnedIndex=()=>{var n,o;const l=e.getIsPinned();if(!l)return-1;const r=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(o=null==r?void 0:r.indexOf(e.id))?o:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,o;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(n=null==(o=e.initialState)?void 0:o.rowPinning)?n:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var n;const o=e.getState().rowPinning;var l,r;return t?Boolean(null==(n=o[t])?void 0:n.length):Boolean((null==(l=o.top)?void 0:l.length)||(null==(r=o.bottom)?void 0:r.length))},e._getPinnedRows=(t,n,o)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{const n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:o}))},e.getTopRows=Gn(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),qn(e.options,"debugRows")),e.getBottomRows=Gn(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),qn(e.options,"debugRows")),e.getCenterRows=Gn(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{const o=/* @__PURE__ */new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!o.has(e.id))},qn(e.options,"debugRows"))}},xo,ho];function Eo(e){var t,n;const o=[...Po,...null!=(t=e._features)?t:[]];let l={_features:o};const r=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{});let a={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;a=null!=(t=null==e.getInitialState?void 0:e.getInitialState(a))?t:a});const i=[];let s=!1;const d={_features:o,options:{...r,...e},initialState:a,_queue:e=>{i.push(e),s||(s=!0,Promise.resolve().then(()=>{for(;i.length;)i.shift()();s=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{const t=Bn(e,l.options);var n;l.options=(n=t,l.options.mergeOptions?l.options.mergeOptions(r,n):{...r,...n})},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var o;return null!=(o=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?o:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&(n=l.getCoreRowModel().rowsById[e],!n))throw new Error;return n},_getDefaultColumnDef:Gn(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},qn(e,"debugColumns")),_getColumnDefs:()=>l.options.columns,getAllColumns:Gn(()=>[l._getColumnDefs()],e=>{const t=function(e,n,o){return void 0===o&&(o=0),e.map(e=>{const r=function(e,t,n,o){var l,r;const a={...e._getDefaultColumnDef(),...t},i=a.accessorKey;let s,d=null!=(l=null!=(r=a.id)?r:i?"function"==typeof String.prototype.replaceAll?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)?l:"string"==typeof a.header?a.header:void 0;if(a.accessorFn?s=a.accessorFn:i&&(s=i.includes(".")?e=>{let t=e;for(const o of i.split(".")){var n;t=null==(n=t)?void 0:n[o]}return t}:e=>e[a.accessorKey]),!d)throw new Error;let c={id:`${String(d)}`,accessorFn:s,parent:o,depth:n,columnDef:a,columns:[],getFlatColumns:Gn(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},qn(e.options,"debugColumns")),getLeafColumns:Gn(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},qn(e.options,"debugColumns"))};for(const u of e._features)null==u.createColumn||u.createColumn(c,e);return c}(l,e,o,n),a=e;return r.columns=a.columns?t(a.columns,r,o+1):[],r})};return t(e)},qn(e,"debugColumns")),getAllFlatColumns:Gn(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),qn(e,"debugColumns")),_getAllFlatColumnsById:Gn(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),qn(e,"debugColumns")),getAllLeafColumns:Gn(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),qn(e,"debugColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let c=0;c<l._features.length;c++){const e=l._features[c];null==e||null==e.createTable||e.createTable(l)}return l}const Fo=()=>{const{setFilterState:e}=vn(),[n,o]=t.useState({selectedTab:"all",selectedStatus:void 0,orderBy:"tokenId",orderDirection:"desc"});return{table:function(e){const n={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[o]=t.useState(()=>({current:Eo(n)})),[l,r]=t.useState(()=>o.current.initialState);return o.current.setOptions(t=>({...t,...e,state:{...l,...e.state},onStateChange:t=>{r(t),null==e.onStateChange||e.onStateChange(t)}})),o.current}({data:[],columns:t.useMemo(()=>[{id:"tokenId",accessorKey:"tokenId",header:"Token ID"},{id:"price",accessorKey:"price",header:"Price"},{id:"deadline",accessorKey:"deadline",header:"Deadline"},{id:"status",accessorKey:"status",header:"Status"}],[]),state:{sorting:[{id:n.orderBy,desc:"desc"===n.orderDirection}]},onSortingChange:t=>{const n="function"==typeof t?t([]):t;n[0]&&(o(e=>({...e,orderBy:n[0].id,orderDirection:n[0].desc?"desc":"asc"})),e({orderBy:n[0].id,orderDirection:n[0].desc?"desc":"asc"}))},getCoreRowModel:e=>Gn(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},o=function(t,l,r){void 0===l&&(l=0);const a=[];for(let s=0;s<t.length;s++){const d=Un(e,e._getRowId(t[s],s,r),t[s],s,l,0,null==r?void 0:r.id);var i;n.flatRows.push(d),n.rowsById[d.id]=d,a.push(d),e.options.getSubRows&&(d.originalSubRows=e.options.getSubRows(t[s],s),null!=(i=d.originalSubRows)&&i.length&&(d.subRows=o(d.originalSubRows,l+1,d)))}return a};return n.rows=o(t),n},qn(e.options,"debugTable",0,()=>e._autoResetPageIndex())),getSortedRowModel:e=>Gn(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const o=e.getState().sorting,l=[],r=o.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),a={};r.forEach(t=>{const n=e.getColumn(t.id);n&&(a[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});const i=e=>{const t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let o=0;o<r.length;o+=1){var n;const l=r[o],i=a[l.id],s=i.sortUndefined,d=null!=(n=null==l?void 0:l.desc)&&n;let c=0;if(s){const n=void 0===e.getValue(l.id),o=void 0===t.getValue(l.id);if(n||o){if("first"===s)return n?-1:1;if("last"===s)return n?1:-1;c=n&&o?0:n?s:-s}}if(0===c&&(c=i.sortingFn(e,t,l.id)),0!==c)return d&&(c*=-1),i.invertSorting&&(c*=-1),c}return e.index-t.index}),t.forEach(e=>{var t;l.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=i(e.subRows))}),t};return{rows:i(n.rows),flatRows:l,rowsById:n.rowsById}},qn(e.options,"debugTable",0,()=>e._autoResetPageIndex()))}),filters:n,setFilters:o,updateTab:t=>{o(e=>({...e,selectedTab:t})),e({selectedTab:t})},updateStatus:t=>{o(e=>({...e,selectedStatus:t})),e({selectedStatus:t})},updateSorting:(t,n)=>{o(e=>({...e,orderBy:t,orderDirection:n})),e({orderBy:t,orderDirection:n})},resetFilters:()=>{o({selectedTab:"all",selectedStatus:void 0,orderBy:"tokenId",orderDirection:"desc"})}}},zo=({address:e,userId:n,className:o})=>{const{filters:l,updateTab:r}=Fo();(()=>{const{filterState:e}=vn(),{resetWithdrawData:n}=Cn(),o=t.useRef(e.selectedTab);t.useEffect(()=>{o.current!==e.selectedTab&&(n(),o.current=e.selectedTab)},[e.selectedTab,n])})();const a=e??"",i=n??"",{data:s,isLoading:d,error:c}=An(a,i),{data:u,isLoading:g,fetchNextPage:m,hasNextPage:p,isFetchingNextPage:f,error:h}=Vn(a,l,i),w=t.useMemo(()=>(null==u?void 0:u.pages.flatMap(e=>e.items))??[],[u]),v=te(),[b,x]=t.useState(!1),[y,S]=t.useState(!1),C=t.useCallback(e=>{x(!0),v(`/boxDetail/${e}`)},[v]),R=t.useCallback(()=>{S(!0),window.location.reload()},[]),I=t.useCallback(()=>{m()},[m]),M=d||g,j=Boolean(c||h);/* @__PURE__ */
return B.jsxs("div",{className:O("space-y-6",o),children:[j?/* @__PURE__ */B.jsx("div",{className:"flex flex-col items-center justify-center min-h-96 space-y-4",children:/* @__PURE__ */B.jsxs("div",{className:"text-center space-y-4",children:[
/* @__PURE__ */B.jsx("h3",{className:"text-lg font-semibold text-red-400",children:"The data loading failed"}),
/* @__PURE__ */B.jsx("p",{className:"text-foreground/70",children:"Something went wrong while loading boxes"}),
/* @__PURE__ */B.jsx("button",{onClick:R,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",disabled:y,children:y?"Refreshing...":"Reload"})]})}):/* @__PURE__ */B.jsxs("div",{className:"space-y-6",children:[
/* @__PURE__ */B.jsx(dn,{data:null==s?void 0:s.stats,loading:d,selectedTab:l.selectedTab,onTabClick:r}),
/* @__PURE__ */B.jsx(kn,{className:"w-full"}),
/* @__PURE__ */B.jsx("div",{className:"w-full",children:M&&0===w.length?/* @__PURE__ */B.jsx("div",{className:"space-y-4",children:Array.from({length:3},(e,t)=>/* @__PURE__ */B.jsx(Nn,{},t))}):w.length>0?/* @__PURE__ */B.jsxs(B.Fragment,{children:[
/* @__PURE__ */B.jsx("div",{className:"w-full space-y-3 sm:space-y-4 md:space-y-6",children:w.map(e=>/* @__PURE__ */B.jsx(Rn,{data:e,userId:n,onCardClick:()=>C(e.id)},e.id))}),p&&/* @__PURE__ */B.jsx("div",{className:"flex justify-center pt-6",children:/* @__PURE__ */B.jsx("button",{onClick:I,disabled:f,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:f?"Loading...":"Load more"})})]}):/* @__PURE__ */B.jsx("div",{className:"flex flex-col items-center justify-center min-h-96 space-y-4",children:/* @__PURE__ */B.jsxs("div",{className:"text-center space-y-2",children:[
/* @__PURE__ */B.jsx("h3",{className:"text-lg font-semibold",children:"No data"}),
/* @__PURE__ */B.jsx("p",{className:"text-foreground/70",children:"You don't have any boxes"})]})})})]}),
/* @__PURE__ */B.jsx(_n,{open:b,closable:!0})]})},Do=({className:e})=>{const{address:n}=$(),o=ne(),l=o&&""!==o.trim()?o.trim():null,[r,a]=t.useState("rewards");/* @__PURE__ */
return B.jsxs(oe,{className:O("space-y-6 py-6",e),children:[
/* @__PURE__ */B.jsx(Yt,{active:r,onChange:a}),"rewards"===r?/* @__PURE__ */B.jsx(sn,{userId:l}):/* @__PURE__ */B.jsx(zo,{address:n,userId:l})]})},_o=()=>/* @__PURE__ */B.jsx(B.Fragment,{children:/* @__PURE__ */B.jsx(Do,{})});export{_o as default};
